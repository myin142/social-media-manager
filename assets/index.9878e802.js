var lt=Object.defineProperty;var ut=(t,e,n)=>e in t?lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var B=(t,e,n)=>(ut(t,typeof e!="symbol"?e+"":e,n),n);const ct=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};ct();function x(){}function te(t,e){for(const n in e)t[n]=e[n];return t}function De(t){return t()}function Te(){return Object.create(null)}function G(t){t.forEach(De)}function ft(t){return typeof t=="function"}function O(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function dt(t){return Object.keys(t).length===0}function H(t,e,n,i){if(t){const r=Me(t,e,n,i);return t[0](r)}}function Me(t,e,n,i){return t[1]&&i?te(n.ctx.slice(),t[1](i(e))):n.ctx}function V(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],s=Math.max(e.dirty.length,r.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|r[a];return o}return e.dirty|r}return e.dirty}function W(t,e,n,i,r,o){if(r){const s=Me(e,n,i,o);t.p(s,r)}}function X(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Se(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function v(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function F(t){return document.createTextNode(t)}function T(){return F(" ")}function oe(){return F("")}function J(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pt(t){return Array.from(t.childNodes)}function we(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function re(t,e){t.value=e==null?"":e}function mt(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}let K;function z(t){K=t}function Ke(){if(!K)throw new Error("Function called outside component initialization");return K}function se(t){Ke().$$.on_mount.push(t)}function He(){const t=Ke();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=mt(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function gt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const M=[],ie=[],j=[],he=[],wt=Promise.resolve();let pe=!1;function _t(){pe||(pe=!0,wt.then(Ve))}function me(t){j.push(t)}function Ae(t){he.push(t)}const fe=new Set;let Z=0;function Ve(){const t=K;do{for(;Z<M.length;){const e=M[Z];Z++,z(e),bt(e.$$)}for(z(null),M.length=0,Z=0;ie.length;)ie.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];fe.has(n)||(fe.add(n),n())}j.length=0}while(M.length);for(;he.length;)he.pop()();pe=!1,fe.clear(),z(t)}function bt(t){if(t.fragment!==null){t.update(),G(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(me)}}const ee=new Set;let U;function We(){U={r:0,c:[],p:U}}function Xe(){U.r||G(U.c),U=U.p}function p(t,e){t&&t.i&&(ee.delete(t),t.i(e))}function _(t,e,n,i){if(t&&t.o){if(ee.has(t))return;ee.add(t),U.c.push(()=>{ee.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function vt(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const l in s)l in a||(i[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[o]=a}else for(const l in s)r[l]=1}for(const s in i)s in n||(n[s]=void 0);return n}function yt(t){return typeof t=="object"&&t!==null?t:{}}function Oe(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function P(t){t&&t.c()}function $(t,e,n,i){const{fragment:r,on_mount:o,on_destroy:s,after_update:a}=t.$$;r&&r.m(e,n),i||me(()=>{const l=o.map(De).filter(ft);s?s.push(...l):G(l),t.$$.on_mount=[]}),a.forEach(me)}function R(t,e){const n=t.$$;n.fragment!==null&&(G(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(t,e){t.$$.dirty[0]===-1&&(M.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function E(t,e,n,i,r,o,s,a=[-1]){const l=K;z(t);const c=t.$$={fragment:null,ctx:null,props:o,update:x,not_equal:r,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Te(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(c.root);let h=!1;if(c.ctx=n?n(t,e.props||{},(u,b,...S)=>{const w=S.length?S[0]:b;return c.ctx&&r(c.ctx[u],c.ctx[u]=w)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](w),h&&kt(t,u)),b}):[],c.update(),h=!0,G(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const u=pt(e.target);c.fragment&&c.fragment.l(u),u.forEach(m)}else c.fragment&&c.fragment.c();e.intro&&p(t.$$.fragment),$(t,e.target,e.anchor,e.customElement),Ve()}z(l)}class L{$destroy(){R(this,1),this.$destroy=x}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!dt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $t="http://localhost".replace(/\/+$/,"");class _e{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:$t}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||Ye}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const Rt=new _e;class Qe{constructor(e=Rt){B(this,"middleware");B(this,"fetchApi",async(e,n)=>{let i={url:e,init:n};for(const o of this.middleware)o.pre&&(i=await o.pre({fetch:this.fetchApi,...i})||i);let r;try{r=await(this.configuration.fetchApi||fetch)(i.url,i.init)}catch(o){for(const s of this.middleware)s.onError&&(r=await s.onError({fetch:this.fetchApi,url:i.url,init:i.init,error:o,response:r?r.clone():void 0})||r);if(r!==void 0)throw new At(o,"The request failed and the interceptors did not return an alternative response")}for(const o of this.middleware)o.post&&(r=await o.post({fetch:this.fetchApi,url:i.url,init:i.init,response:r.clone()})||r);return r});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const n=this.clone();return n.middleware=n.middleware.concat(...e),n}withPreMiddleware(...e){const n=e.map(i=>({pre:i}));return this.withMiddleware(...n)}withPostMiddleware(...e){const n=e.map(i=>({post:i}));return this.withMiddleware(...n)}async request(e,n){const{url:i,init:r}=await this.createFetchParams(e,n),o=await this.fetchApi(i,r);if(o.status>=200&&o.status<300)return o;throw new St(o,"Response returned an error code")}async createFetchParams(e,n){let i=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(i+="?"+this.configuration.queryParamsStringify(e.query));const r=Object.assign({},this.configuration.headers,e.headers);Object.keys(r).forEach(c=>r[c]===void 0?delete r[c]:{});const o=typeof n=="function"?n:async()=>n,s={method:e.method,headers:r,body:e.body,credentials:this.configuration.credentials},a={...s,...await o({init:s,context:e})},l={...a,body:Tt(a.body)||a.body instanceof URLSearchParams||Pt(a.body)?a.body:JSON.stringify(a.body)};return{url:i,init:l}}clone(){const e=this.constructor,n=new e(this.configuration);return n.middleware=this.middleware.slice(),n}}function Pt(t){return typeof Blob!="undefined"&&t instanceof Blob}function Tt(t){return typeof FormData!="undefined"&&t instanceof FormData}class St extends Error{constructor(n,i){super(i);B(this,"name","ResponseError");this.response=n}}class At extends Error{constructor(n,i){super(i);B(this,"name","FetchError");this.cause=n}}class N extends Error{constructor(n,i){super(i);B(this,"name","RequiredError");this.field=n}}function Ot(t,e){const n=t[e];return n!=null}function Ye(t,e=""){return Object.keys(t).map(n=>Ze(n,t[n],e)).filter(n=>n.length>0).join("&")}function Ze(t,e,n=""){const i=n+(n.length?`[${t}]`:t);if(e instanceof Array){const r=e.map(o=>encodeURIComponent(String(o))).join(`&${encodeURIComponent(i)}=`);return`${encodeURIComponent(i)}=${r}`}if(e instanceof Set){const r=Array.from(e);return Ze(t,r,n)}return e instanceof Date?`${encodeURIComponent(i)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?Ye(e,i):`${encodeURIComponent(i)}=${encodeURIComponent(String(e))}`}function je(t){for(const e of t)if(e.contentType==="multipart/form-data")return!0;return!1}class C{constructor(e,n=i=>i){this.raw=e,this.transformer=n}async value(){return this.transformer(await this.raw.json())}}class Ee{constructor(e){this.raw=e}async value(){}}function Et(t){if(t!==void 0)return t===null?null:{password:t.password,username:t.username}}function ge(t){return Lt(t)}function Lt(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}function Le(t){return qt(t)}function qt(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,name:t.name,refreshToken:t.refresh_token,userId:t.user_id,username:t.username}}function Nt(t){return Ct(t)}function Ct(t,e){return t==null?t:{image:t.image,link:t.link,title:t.title}}function Ft(t){return It(t)}function It(t,e){return t==null?t:{result:t.result.map(Nt)}}function et(t){if(t!==void 0)return t===null?null:{refresh_token:t.refreshToken}}function tt(t){return Ut(t)}function Ut(t,e){return t==null?t:{url:Ot(t,"url")?t.url:void 0}}function xt(t){if(t!==void 0)return t===null?null:{token:t.token}}function Bt(t){return Jt(t)}function Jt(t,e){return t==null?t:{accessSecret:t.access_secret,accessToken:t.access_token}}function Gt(t){return Dt(t)}function Dt(t,e){return t==null?t:{id:t.id,name:t.name}}class Mt extends Qe{async pixivAuthPostRaw(e,n){if(e.login===null||e.login===void 0)throw new N("login","Required parameter requestParameters.login was null or undefined when calling pixivAuthPost.");const i={},r={};r["Content-Type"]="application/json";const o=await this.request({path:"/api/pixiv/auth/",method:"POST",headers:r,query:i,body:Et(e.login)},n);return new C(o,s=>Le(s))}async pixivAuthPost(e,n){return await(await this.pixivAuthPostRaw(e,n)).value()}async pixivPostPostPostRaw(e,n){if(e.images===null||e.images===void 0)throw new N("images","Required parameter requestParameters.images was null or undefined when calling pixivPostPostPost.");if(e.tags===null||e.tags===void 0)throw new N("tags","Required parameter requestParameters.tags was null or undefined when calling pixivPostPostPost.");if(e.title===null||e.title===void 0)throw new N("title","Required parameter requestParameters.title was null or undefined when calling pixivPostPostPost.");const i={},r={};if(this.configuration&&this.configuration.accessToken){const h=this.configuration.accessToken,u=await h("jwt",[]);u&&(r.Authorization=`Bearer ${u}`)}const s=je([{contentType:"multipart/form-data"}]);let a,l=!1;l=s,l?a=new FormData:a=new URLSearchParams,e.images&&e.images.forEach(h=>{a.append("images",h)}),e.tags!==void 0&&a.append("tags",e.tags),e.text!==void 0&&a.append("text",e.text),e.title!==void 0&&a.append("title",e.title);const c=await this.request({path:"/api/pixiv/post",method:"POST",headers:r,query:i,body:a},n);return new C(c,h=>tt(h))}async pixivPostPostPost(e,n){return await(await this.pixivPostPostPostRaw(e,n)).value()}async pixivRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new N("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling pixivRefreshRefreshPost.");const i={},r={};r["Content-Type"]="application/json";const o=await this.request({path:"/api/pixiv/auth/refresh",method:"POST",headers:r,query:i,body:et(e.refreshToken)},n);return new C(o,s=>Le(s))}async pixivRefreshRefreshPost(e,n){return await(await this.pixivRefreshRefreshPostRaw(e,n)).value()}}class zt extends Qe{async redditAuthCallbackCallbackGetRaw(e){const n={},i={},r=await this.request({path:"/api/reddit/auth/callback",method:"GET",headers:i,query:n},e);return new C(r,o=>ge(o))}async redditAuthCallbackCallbackGet(e){return await(await this.redditAuthCallbackCallbackGetRaw(e)).value()}async redditAuthGetRaw(e,n){const i={};e.returnTo!==void 0&&(i.return_to=e.returnTo);const r={},o=await this.request({path:"/api/reddit/auth/",method:"GET",headers:r,query:i},n);return new Ee(o)}async redditAuthGet(e={},n){await this.redditAuthGetRaw(e,n)}async redditPostPostPostRaw(e,n){if(e.subreddit===null||e.subreddit===void 0)throw new N("subreddit","Required parameter requestParameters.subreddit was null or undefined when calling redditPostPostPost.");if(e.title===null||e.title===void 0)throw new N("title","Required parameter requestParameters.title was null or undefined when calling redditPostPostPost.");const i={},r={};if(this.configuration&&this.configuration.accessToken){const h=this.configuration.accessToken,u=await h("jwt",[]);u&&(r.Authorization=`Bearer ${u}`)}const s=je([{contentType:"multipart/form-data"}]);let a,l=!1;l=s,l?a=new FormData:a=new URLSearchParams,e.flair!==void 0&&a.append("flair",e.flair),e.images&&e.images.forEach(h=>{a.append("images",h)}),e.subreddit!==void 0&&a.append("subreddit",e.subreddit),e.text!==void 0&&a.append("text",e.text),e.title!==void 0&&a.append("title",e.title);const c=await this.request({path:"/api/reddit/post",method:"POST",headers:r,query:i,body:a},n);return new C(c,h=>tt(h))}async redditPostPostPost(e,n){return await(await this.redditPostPostPostRaw(e,n)).value()}async redditRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new N("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling redditRefreshRefreshPost.");const i={},r={};r["Content-Type"]="application/json";const o=await this.request({path:"/api/reddit/auth/refresh",method:"POST",headers:r,query:i,body:et(e.refreshToken)},n);return new C(o,s=>ge(s))}async redditRefreshRefreshPost(e,n){return await(await this.redditRefreshRefreshPostRaw(e,n)).value()}async redditRevokeRevokePostRaw(e,n){if(e.token===null||e.token===void 0)throw new N("token","Required parameter requestParameters.token was null or undefined when calling redditRevokeRevokePost.");const i={},r={};r["Content-Type"]="application/json";const o=await this.request({path:"/api/reddit/auth/revoke",method:"POST",headers:r,query:i,body:xt(e.token)},n);return new Ee(o)}async redditRevokeRevokePost(e,n){await this.redditRevokeRevokePostRaw(e,n)}async upvotedUpvotedGetRaw(e){const n={},i={};if(this.configuration&&this.configuration.accessToken){const o=this.configuration.accessToken,s=await o("jwt",[]);s&&(i.Authorization=`Bearer ${s}`)}const r=await this.request({path:"/api/reddit/upvoted",method:"GET",headers:i,query:n},e);return new C(r,o=>Ft(o))}async upvotedUpvotedGet(e){return await(await this.upvotedUpvotedGetRaw(e)).value()}async userUserGetRaw(e){const n={},i={};if(this.configuration&&this.configuration.accessToken){const o=this.configuration.accessToken,s=await o("jwt",[]);s&&(i.Authorization=`Bearer ${s}`)}const r=await this.request({path:"/api/reddit/user",method:"GET",headers:i,query:n},e);return new C(r,o=>Gt(o))}async userUserGet(e){return await(await this.userUserGetRaw(e)).value()}}function qe(t){let e,n;return{c(){e=ne("title"),n=F(t[0])},m(i,r){g(i,e,r),v(e,n)},p(i,r){r&1&&we(n,i[0])},d(i){i&&m(e)}}}function Kt(t){let e,n,i,r=t[0]&&qe(t);const o=t[3].default,s=H(o,t,t[2],null);return{c(){e=ne("svg"),r&&r.c(),n=oe(),s&&s.c(),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox",t[1]),f(e,"class","svelte-c8tyih")},m(a,l){g(a,e,l),r&&r.m(e,null),v(e,n),s&&s.m(e,null),i=!0},p(a,[l]){a[0]?r?r.p(a,l):(r=qe(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),s&&s.p&&(!i||l&4)&&W(s,o,a,a[2],i?V(o,a[2],l,null):X(a[2]),null),(!i||l&2)&&f(e,"viewBox",a[1])},i(a){i||(p(s,a),i=!0)},o(a){_(s,a),i=!1},d(a){a&&m(e),r&&r.d(),s&&s.d(a)}}}function Ht(t,e,n){let{$$slots:i={},$$scope:r}=e,{title:o=null}=e,{viewBox:s}=e;return t.$$set=a=>{"title"in a&&n(0,o=a.title),"viewBox"in a&&n(1,s=a.viewBox),"$$scope"in a&&n(2,r=a.$$scope)},[o,s,r,i]}class Vt extends L{constructor(e){super(),E(this,e,Ht,Kt,O,{title:0,viewBox:1})}}function Wt(t){let e,n,i;return{c(){e=ne("path"),n=T(),i=ne("path"),f(e,"d","M256 48c-42.9 0-84.2 13-119.2 37.5-34.2 24-60.2 57.2-75.1 96.1L58 192h45.7l1.9-5c8.2-17.8 19.4-33.9 33.5-48 31.2-31.2 72.7-48.4 116.9-48.4s85.7 17.2 116.9 48.4c31.2 31.2 48.4 72.7 48.4 116.9 0 44.1-17.2 85.7-48.4 116.9-31.2 31.2-72.7 48.4-116.9 48.4-44.1 0-85.6-17.2-116.9-48.4-14-14-25.3-30.1-33.5-47.9l-1.9-5H58l3.6 10.4c14.9 38.9 40.9 72.1 75.1 96.1C171.8 451.1 213 464 256 464c114.7 0 208-93.3 208-208S370.7 48 256 48z"),f(i,"d","M48 277.4h189.7l-43.6 44.7L224 352l96-96-96-96-31 29.9 44.7 44.7H48v42.8z")},m(r,o){g(r,e,o),g(r,n,o),g(r,i,o)},p:x,d(r){r&&m(e),r&&m(n),r&&m(i)}}}function Xt(t){let e,n;const i=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Wt]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=te(r,i[o]);return e=new Vt({props:r}),{c(){P(e.$$.fragment)},m(o,s){$(e,o,s),n=!0},p(o,[s]){const a=s&1?vt(i,[i[0],yt(o[0])]):{};s&2&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){R(e,o)}}}function Qt(t,e,n){return t.$$set=i=>{n(0,e=te(te({},e),Se(i)))},e=Se(e),[e]}class nt extends L{constructor(e){super(),E(this,e,Qt,Xt,O,{})}}const be={apiBase:"https://sns-manager.herokuapp.com"},rt="sns-manager-tokens-",it=localStorage,ve=t=>{const e=rt+t;return JSON.parse(it.getItem(e)||"[]")},ot=(t,e)=>{const n=e.toLowerCase()==="twitter";if(!t||!t.accessToken||n&&!t.accessSecret){console.log("Invalid token",t);return}const i=rt+e,r=ve(e);r.findIndex(o=>o.accessToken===t.accessToken)===-1?(r.push(t),it.setItem(i,JSON.stringify(r))):console.warn("User is already logged in. Ignoring")};function Yt(t){let e,n,i,r,o,s;return i=new nt({}),{c(){e=y("a"),n=y("div"),P(i.$$.fragment),r=T(),o=F(t[0]),f(n,"class","w-4 h-4"),f(e,"href",t[1]()),f(e,"class","flex flex-row items-center font-bold")},m(a,l){g(a,e,l),v(e,n),$(i,n,null),v(e,r),v(e,o),s=!0},p(a,[l]){(!s||l&1)&&we(o,a[0])},i(a){s||(p(i.$$.fragment,a),s=!0)},o(a){_(i.$$.fragment,a),s=!1},d(a){a&&m(e),R(i)}}}function Zt(t,e,n){let{provider:i}=e;const r=He(),o=i.toLowerCase(),s=()=>window.location.origin+window.location.pathname,a=()=>`${be.apiBase}/api/${o}/auth?return_to=${encodeURIComponent(s())}`;return se(()=>{const c=new URLSearchParams(window.location.search).get(o);if(c){const h=JSON.parse(c),b=i.toLowerCase()==="twitter"?Bt(h):ge(h);ot(b,i),history.replaceState("","",s())}r("login",{tokens:ve(i)})}),t.$$set=l=>{"provider"in l&&n(0,i=l.provider)},[i,a]}class de extends L{constructor(e){super(),E(this,e,Zt,Yt,O,{provider:0})}}function jt(t){let e,n,i;return{c(){e=y("input"),f(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),f(e,"type","text"),f(e,"name",t[4]),e.disabled=t[1],e.required=t[2],f(e,"placeholder",t[3])},m(r,o){g(r,e,o),re(e,t[0]),n||(i=J(e,"input",t[7]),n=!0)},p(r,o){o&16&&f(e,"name",r[4]),o&2&&(e.disabled=r[1]),o&4&&(e.required=r[2]),o&8&&f(e,"placeholder",r[3]),o&1&&e.value!==r[0]&&re(e,r[0])},d(r){r&&m(e),n=!1,i()}}}function en(t){let e,n,i;return{c(){e=y("input"),f(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),f(e,"type","password"),f(e,"name",t[4]),e.disabled=t[1],e.required=t[2],f(e,"placeholder",t[3])},m(r,o){g(r,e,o),re(e,t[0]),n||(i=J(e,"input",t[6]),n=!0)},p(r,o){o&16&&f(e,"name",r[4]),o&2&&(e.disabled=r[1]),o&4&&(e.required=r[2]),o&8&&f(e,"placeholder",r[3]),o&1&&e.value!==r[0]&&re(e,r[0])},d(r){r&&m(e),n=!1,i()}}}function tn(t){let e;function n(o,s){return o[5]?en:jt}let i=n(t),r=i(t);return{c(){r.c(),e=oe()},m(o,s){r.m(o,s),g(o,e,s)},p(o,[s]){i===(i=n(o))&&r?r.p(o,s):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:x,o:x,d(o){r.d(o),o&&m(e)}}}function nn(t,e,n){let{value:i}=e,{disabled:r=!1}=e,{required:o=!1}=e,{placeholder:s=""}=e,{name:a=""}=e,{password:l=!1}=e;function c(){i=this.value,n(0,i)}function h(){i=this.value,n(0,i)}return t.$$set=u=>{"value"in u&&n(0,i=u.value),"disabled"in u&&n(1,r=u.disabled),"required"in u&&n(2,o=u.required),"placeholder"in u&&n(3,s=u.placeholder),"name"in u&&n(4,a=u.name),"password"in u&&n(5,l=u.password)},[i,r,o,s,a,l,c,h]}class Ne extends L{constructor(e){super(),E(this,e,nn,tn,O,{value:0,disabled:1,required:2,placeholder:3,name:4,password:5})}}function rn(t){let e,n,i,r;const o=t[3].default,s=H(o,t,t[2],null);return{c(){e=y("button"),s&&s.c(),f(e,"class","disabled:text-gray-500 font-semibold border p-2 rounded"),e.disabled=t[0],f(e,"type",t[1])},m(a,l){g(a,e,l),s&&s.m(e,null),n=!0,i||(r=J(e,"click",t[4]),i=!0)},p(a,[l]){s&&s.p&&(!n||l&4)&&W(s,o,a,a[2],n?V(o,a[2],l,null):X(a[2]),null),(!n||l&1)&&(e.disabled=a[0]),(!n||l&2)&&f(e,"type",a[1])},i(a){n||(p(s,a),n=!0)},o(a){_(s,a),n=!1},d(a){a&&m(e),s&&s.d(a),i=!1,r()}}}function on(t,e,n){let{$$slots:i={},$$scope:r}=e,{disabled:o=!1}=e,{type:s="button"}=e;function a(l){gt.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,o=l.disabled),"type"in l&&n(1,s=l.type),"$$scope"in l&&n(2,r=l.$$scope)},[o,s,r,i,a]}class sn extends L{constructor(e){super(),E(this,e,on,rn,O,{disabled:0,type:1})}}function an(t){let e;return{c(){e=F("Login")},m(n,i){g(n,e,i)},d(n){n&&m(e)}}}function ln(t){let e,n,i,r,o,s,a,l,c,h,u,b,S,w,k,q,ye,Q,ke,I,Y,D,ae,$e;i=new nt({});function st(d){t[7](d)}let Re={name:"username",disabled:t[3],placeholder:"Username",required:!0};t[0]!==void 0&&(Re.value=t[0]),b=new Ne({props:Re}),ie.push(()=>Oe(b,"value",st));function at(d){t[8](d)}let Pe={name:"password",disabled:t[3],placeholder:"Password",required:!0,password:!0};return t[1]!==void 0&&(Pe.value=t[1]),k=new Ne({props:Pe}),ie.push(()=>Oe(k,"value",at)),I=new sn({props:{type:"submit",disabled:t[3],$$slots:{default:[an]},$$scope:{ctx:t}}}),{c(){e=y("button"),n=y("div"),P(i.$$.fragment),r=F(`
  Pixiv`),o=T(),s=y("div"),a=y("div"),l=T(),c=y("h2"),c.textContent="Pixiv Login",h=T(),u=y("form"),P(b.$$.fragment),w=T(),P(k.$$.fragment),ye=T(),Q=y("div"),Q.textContent="Login might be slow or fail often.",ke=T(),P(I.$$.fragment),f(n,"class","w-4 h-4"),f(e,"class","flex flex-row items-center font-bold"),f(a,"class","fixed inset-0 -z-10"),f(c,"class","font-bold"),f(Q,"class","text-xs text-gray-500"),f(u,"class","flex flex-col gap-2 justify-center p-4 z-10"),f(s,"class",Y=`${t[2]?"flex":"hidden"} fixed inset-0 items-center justify-center backdrop-blur-sm flex-col`)},m(d,A){g(d,e,A),v(e,n),$(i,n,null),v(e,r),g(d,o,A),g(d,s,A),v(s,a),v(s,l),v(s,c),v(s,h),v(s,u),$(b,u,null),v(u,w),$(k,u,null),v(u,ye),v(u,Q),v(u,ke),$(I,u,null),D=!0,ae||($e=[J(e,"click",t[5]),J(a,"click",t[6]),J(u,"submit",ht(t[9]))],ae=!0)},p(d,[A]){const le={};A&8&&(le.disabled=d[3]),!S&&A&1&&(S=!0,le.value=d[0],Ae(()=>S=!1)),b.$set(le);const ue={};A&8&&(ue.disabled=d[3]),!q&&A&2&&(q=!0,ue.value=d[1],Ae(()=>q=!1)),k.$set(ue);const ce={};A&8&&(ce.disabled=d[3]),A&4096&&(ce.$$scope={dirty:A,ctx:d}),I.$set(ce),(!D||A&4&&Y!==(Y=`${d[2]?"flex":"hidden"} fixed inset-0 items-center justify-center backdrop-blur-sm flex-col`))&&f(s,"class",Y)},i(d){D||(p(i.$$.fragment,d),p(b.$$.fragment,d),p(k.$$.fragment,d),p(I.$$.fragment,d),D=!0)},o(d){_(i.$$.fragment,d),_(b.$$.fragment,d),_(k.$$.fragment,d),_(I.$$.fragment,d),D=!1},d(d){d&&m(e),R(i),d&&m(o),d&&m(s),R(b),R(k),R(I),ae=!1,G($e)}}}const Ce="pixiv";function un(t,e,n){const i=He();let r="",o="",s=!1,a=!1;const l=async()=>{const k=new Mt(new _e({basePath:be.apiBase}));n(3,a=!0);try{const q=await k.pixivAuthPost({login:{username:r,password:o}});ot(q,Ce),c(),n(2,s=!1),n(0,r=""),n(1,o="")}catch(q){console.log("Failed to login to pixiv",q)}finally{n(3,a=!1)}},c=()=>{i("login",{tokens:ve(Ce)})};se(()=>c());const h=()=>n(2,s=!s),u=()=>n(2,s=!1);function b(k){r=k,n(0,r)}function S(k){o=k,n(1,o)}return[r,o,s,a,l,h,u,b,S,()=>l()]}class cn extends L{constructor(e){super(),E(this,e,un,ln,O,{})}}function Fe(t,e,n){const i=t.slice();return i[2]=e[n],i}function Ie(t){let e,n=t[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ue(Fe(t,n,r));return{c(){e=y("div");for(let r=0;r<i.length;r+=1)i[r].c();f(e,"class","flex flex-row flex-wrap w-full")},m(r,o){g(r,e,o);for(let s=0;s<i.length;s+=1)i[s].m(e,null)},p(r,o){if(o&1){n=r[0];let s;for(s=0;s<n.length;s+=1){const a=Fe(r,n,s);i[s]?i[s].p(a,o):(i[s]=Ue(a),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(r){r&&m(e),ze(i,r)}}}function Ue(t){let e,n,i;return{c(){e=y("a"),f(e,"href",n="https://reddit.com"+t[2].link),f(e,"class","w-1/2 h-50v sm:w-1/4 sm:h-25v lg:w-1/6 lg:h-15v bg-cover"),f(e,"style",i=`background-image: url(${t[2].image})`)},m(r,o){g(r,e,o)},p(r,o){o&1&&n!==(n="https://reddit.com"+r[2].link)&&f(e,"href",n),o&1&&i!==(i=`background-image: url(${r[2].image})`)&&f(e,"style",i)},d(r){r&&m(e)}}}function fn(t){let e,n=t[0]&&Ie(t);return{c(){n&&n.c(),e=oe()},m(i,r){n&&n.m(i,r),g(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=Ie(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:x,o:x,d(i){n&&n.d(i),i&&m(e)}}}function dn(t,e,n){let{api:i}=e,r=null;return se(async()=>{const{result:o}=await i.upvotedUpvotedGet();n(0,r=o)}),t.$$set=o=>{"api"in o&&n(1,i=o.api)},[r,i]}class hn extends L{constructor(e){super(),E(this,e,dn,fn,O,{api:1})}}function pn(t){let e,n;const i=t[2].default,r=H(i,t,t[1],null);return{c(){e=y("a"),r&&r.c(),f(e,"href",t[0]),f(e,"class","text-blue-900 hover:underline"),f(e,"target","_blank")},m(o,s){g(o,e,s),r&&r.m(e,null),n=!0},p(o,[s]){r&&r.p&&(!n||s&2)&&W(r,i,o,o[1],n?V(i,o[1],s,null):X(o[1]),null),(!n||s&1)&&f(e,"href",o[0])},i(o){n||(p(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&m(e),r&&r.d(o)}}}function mn(t,e,n){let{$$slots:i={},$$scope:r}=e,{url:o}=e;return t.$$set=s=>{"url"in s&&n(0,o=s.url),"$$scope"in s&&n(1,r=s.$$scope)},[o,r,i]}class gn extends L{constructor(e){super(),E(this,e,mn,pn,O,{url:0})}}function wn(t){let e,n;const i=t[1].default,r=H(i,t,t[0],null);return{c(){e=y("div"),r&&r.c(),f(e,"class","flex flex-col gap-4 p-4 bg-white rounded-md")},m(o,s){g(o,e,s),r&&r.m(e,null),n=!0},p(o,[s]){r&&r.p&&(!n||s&1)&&W(r,i,o,o[0],n?V(i,o[0],s,null):X(o[0]),null)},i(o){n||(p(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&m(e),r&&r.d(o)}}}function _n(t,e,n){let{$$slots:i={},$$scope:r}=e;return t.$$set=o=>{"$$scope"in o&&n(0,r=o.$$scope)},[r,i]}class bn extends L{constructor(e){super(),E(this,e,_n,wn,O,{})}}const vn=t=>({}),xe=t=>({api:t[1]});function Be(t){let e,n;return e=new bn({props:{$$slots:{default:[kn]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,r){$(e,i,r),n=!0},p(i,r){const o={};r&17&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){R(e,i)}}}function yn(t){let e,n=t[0].name+"",i;return{c(){e=F("Reddit - "),i=F(n)},m(r,o){g(r,e,o),g(r,i,o)},p(r,o){o&1&&n!==(n=r[0].name+"")&&we(i,n)},d(r){r&&m(e),r&&m(i)}}}function kn(t){let e,n,i;e=new gn({props:{url:`https://reddit.com/u/${t[0].name}`,$$slots:{default:[yn]},$$scope:{ctx:t}}});const r=t[3].default,o=H(r,t,t[4],xe);return{c(){P(e.$$.fragment),n=T(),o&&o.c()},m(s,a){$(e,s,a),g(s,n,a),o&&o.m(s,a),i=!0},p(s,a){const l={};a&1&&(l.url=`https://reddit.com/u/${s[0].name}`),a&17&&(l.$$scope={dirty:a,ctx:s}),e.$set(l),o&&o.p&&(!i||a&16)&&W(o,r,s,s[4],i?V(r,s[4],a,vn):X(s[4]),xe)},i(s){i||(p(e.$$.fragment,s),p(o,s),i=!0)},o(s){_(e.$$.fragment,s),_(o,s),i=!1},d(s){R(e,s),s&&m(n),o&&o.d(s)}}}function $n(t){let e,n,i=t[0]&&Be(t);return{c(){i&&i.c(),e=oe()},m(r,o){i&&i.m(r,o),g(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&p(i,1)):(i=Be(r),i.c(),p(i,1),i.m(e.parentNode,e)):i&&(We(),_(i,1,1,()=>{i=null}),Xe())},i(r){n||(p(i),n=!0)},o(r){_(i),n=!1},d(r){i&&i.d(r),r&&m(e)}}}function Rn(t,e,n){let{$$slots:i={},$$scope:r}=e,{token:o}=e,s;const a=new zt(new _e({basePath:be.apiBase,accessToken:o.accessToken}));return se(async()=>{const l=await a.userUserGetRaw();l.raw.status===401?await a.redditRefreshRefreshPost({refreshToken:{refreshToken:o.refreshToken}}):l.raw.status===200&&n(0,s=await l.value())}),t.$$set=l=>{"token"in l&&n(2,o=l.token),"$$scope"in l&&n(4,r=l.$$scope)},[s,a,o,i,r]}class Pn extends L{constructor(e){super(),E(this,e,Rn,$n,O,{token:2})}}function Je(t,e,n){const i=t.slice();return i[1]=e[n],i}function Tn(t){let e,n,i;return e=new hn({props:{api:t[4]}}),{c(){P(e.$$.fragment),n=T()},m(r,o){$(e,r,o),g(r,n,o),i=!0},p(r,o){const s={};o&16&&(s.api=r[4]),e.$set(s)},i(r){i||(p(e.$$.fragment,r),i=!0)},o(r){_(e.$$.fragment,r),i=!1},d(r){R(e,r),r&&m(n)}}}function Ge(t){let e,n;return e=new Pn({props:{token:t[1],$$slots:{default:[Tn,({api:i})=>({4:i}),({api:i})=>i?16:0]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(i,r){$(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.token=i[1]),r&48&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){R(e,i)}}}function Sn(t){let e,n,i=t[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=Ge(Je(t,i,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=y("div");for(let s=0;s<r.length;s+=1)r[s].c();f(e,"class","flex flex-col")},m(s,a){g(s,e,a);for(let l=0;l<r.length;l+=1)r[l].m(e,null);n=!0},p(s,[a]){if(a&17){i=s[0];let l;for(l=0;l<i.length;l+=1){const c=Je(s,i,l);r[l]?(r[l].p(c,a),p(r[l],1)):(r[l]=Ge(c),r[l].c(),p(r[l],1),r[l].m(e,null))}for(We(),l=i.length;l<r.length;l+=1)o(l);Xe()}},i(s){if(!n){for(let a=0;a<i.length;a+=1)p(r[a]);n=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)_(r[a]);n=!1},d(s){s&&m(e),ze(r,s)}}}function An(t,e,n){let{redditLogins:i=[]}=e;return t.$$set=r=>{"redditLogins"in r&&n(0,i=r.redditLogins)},[i]}class On extends L{constructor(e){super(),E(this,e,An,Sn,O,{redditLogins:0})}}function En(t){let e,n,i,r,o,s,a,l,c,h,u,b,S;return i=new de({props:{provider:"Twitter"}}),i.$on("login",t[4]),o=new de({props:{provider:"Reddit"}}),o.$on("login",t[5]),a=new de({props:{provider:"Pinterest"}}),a.$on("login",t[6]),c=new cn({}),c.$on("login",t[7]),b=new On({props:{redditLogins:t[1]}}),{c(){e=y("div"),n=y("header"),P(i.$$.fragment),r=T(),P(o.$$.fragment),s=T(),P(a.$$.fragment),l=T(),P(c.$$.fragment),h=T(),u=y("main"),P(b.$$.fragment),f(n,"class","flex flex-row justify-center gap-4 border-b p-2"),f(u,"class","p-4"),f(e,"class","h-full flex flex-col")},m(w,k){g(w,e,k),v(e,n),$(i,n,null),v(n,r),$(o,n,null),v(n,s),$(a,n,null),v(n,l),$(c,n,null),v(e,h),v(e,u),$(b,u,null),S=!0},p(w,[k]){const q={};k&2&&(q.redditLogins=w[1]),b.$set(q)},i(w){S||(p(i.$$.fragment,w),p(o.$$.fragment,w),p(a.$$.fragment,w),p(c.$$.fragment,w),p(b.$$.fragment,w),S=!0)},o(w){_(i.$$.fragment,w),_(o.$$.fragment,w),_(a.$$.fragment,w),_(c.$$.fragment,w),_(b.$$.fragment,w),S=!1},d(w){w&&m(e),R(i),R(o),R(a),R(c),R(b)}}}function Ln(t,e,n){let i=[],r=[],o=[],s=[];return console.log("%c THIS IS A WARNING ","color: #bc3939; font-size: 16px"),console.log("%c Be careful when executing something in here. It's possible to get your account information","color: #bc3939; font-size: 14px"),[i,r,o,s,u=>n(0,i=u.detail.tokens),u=>n(1,r=u.detail.tokens),u=>n(3,s=u.detail.tokens),u=>n(2,o=u.detail.tokens)]}class qn extends L{constructor(e){super(),E(this,e,Ln,En,O,{})}}new qn({target:document.getElementById("app")});
