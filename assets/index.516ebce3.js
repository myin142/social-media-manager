var Tt=Object.defineProperty;var Rt=(t,e,n)=>e in t?Tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>(Rt(t,typeof e!="symbol"?e+"":e,n),n);const Pt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Pt();function W(){}function ye(t,e){for(const n in e)t[n]=e[n];return t}function st(t){return t()}function xe(){return Object.create(null)}function ee(t){t.forEach(st)}function $t(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let we;function ze(t,e){return we||(we=document.createElement("a")),we.href=e,t===we.href}function St(t){return Object.keys(t).length===0}function Te(t,e,n,r){if(t){const i=ot(t,e,n,r);return t[0](i)}}function ot(t,e,n,r){return t[1]&&r?ye(n.ctx.slice(),t[1](r(e))):n.ctx}function Re(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function Pe(t,e,n,r,i,s){if(i){const o=ot(e,n,r,s);t.p(o,i)}}function $e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Me(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function _(t,e){t.appendChild(e)}function U(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function at(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ne(t){return document.createTextNode(t)}function D(){return ne(" ")}function ge(){return ne("")}function V(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function It(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ot(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function At(t){return Array.from(t.childNodes)}function Se(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function oe(t,e){t.value=e==null?"":e}function Et(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ut(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let ue;function le(t){ue=t}function lt(){if(!ue)throw new Error("Function called outside component initialization");return ue}function ce(t){lt().$$.on_mount.push(t)}function se(){const t=lt();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=Ut(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function ut(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const ae=[],fe=[],ke=[],Ue=[],Ft=Promise.resolve();let Fe=!1;function Ct(){Fe||(Fe=!0,Ft.then(ct))}function Ce(t){ke.push(t)}function Ke(t){Ue.push(t)}const Oe=new Set;let _e=0;function ct(){const t=ue;do{for(;_e<ae.length;){const e=ae[_e];_e++,le(e),Gt(e.$$)}for(le(null),ae.length=0,_e=0;fe.length;)fe.pop()();for(let e=0;e<ke.length;e+=1){const n=ke[e];Oe.has(n)||(Oe.add(n),n())}ke.length=0}while(ae.length);for(;Ue.length;)Ue.pop()();Fe=!1,Oe.clear(),le(t)}function Gt(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ce)}}const be=new Set;let re;function de(){re={r:0,c:[],p:re}}function he(){re.r||ee(re.c),re=re.p}function S(t,e){t&&t.i&&(be.delete(t),t.i(e))}function E(t,e,n,r){if(t&&t.o){if(be.has(t))return;be.add(t),re.c.push(()=>{be.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Nt(t,e){E(t,1,1,()=>{e.delete(t.key)})}function Lt(t,e,n,r,i,s,o,a,l,u,d,f){let p=t.length,k=s.length,b=p;const $={};for(;b--;)$[t[b].key]=b;const I=[],B=new Map,K=new Map;for(b=k;b--;){const T=f(i,s,b),v=n(T);let R=o.get(v);R?r&&R.p(T,e):(R=u(v,T),R.c()),B.set(v,I[b]=R),v in $&&K.set(v,Math.abs(b-$[v]))}const y=new Set,J=new Set;function g(T){S(T,1),T.m(a,d),o.set(T.key,T),d=T.first,k--}for(;p&&k;){const T=I[k-1],v=t[p-1],R=T.key,N=v.key;T===v?(d=T.first,p--,k--):B.has(N)?!o.has(R)||y.has(R)?g(T):J.has(N)?p--:K.get(R)>K.get(N)?(J.add(R),g(T)):(y.add(N),p--):(l(v,o),p--)}for(;p--;){const T=t[p];B.has(T.key)||l(T,o)}for(;k;)g(I[k-1]);return I}function qt(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const l in o)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[s]=a}else for(const l in o)i[l]=1}for(const o in r)o in n||(n[o]=void 0);return n}function Dt(t){return typeof t=="object"&&t!==null?t:{}}function Ve(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function M(t){t&&t.c()}function x(t,e,n,r){const{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||Ce(()=>{const l=s.map(st).filter($t);o?o.push(...l):ee(l),t.$$.on_mount=[]}),a.forEach(Ce)}function z(t,e){const n=t.$$;n.fragment!==null&&(ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Bt(t,e){t.$$.dirty[0]===-1&&(ae.push(t),Ct(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,r,i,s,o,a=[-1]){const l=ue;le(t);const u=t.$$={fragment:null,ctx:null,props:s,update:W,not_equal:i,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:xe(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(f,p,...k)=>{const b=k.length?k[0]:p;return u.ctx&&i(u.ctx[f],u.ctx[f]=b)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](b),d&&Bt(t,f)),p}):[],u.update(),d=!0,ee(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=At(e.target);u.fragment&&u.fragment.l(f),f.forEach(A)}else u.fragment&&u.fragment.c();e.intro&&S(t.$$.fragment),x(t,e.target,e.anchor,e.customElement),ct()}le(l)}class Y{$destroy(){z(this,1),this.$destroy=W}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function He(t){let e,n;return{c(){e=ve("title"),n=ne(t[0])},m(r,i){U(r,e,i),_(e,n)},p(r,i){i&1&&Se(n,r[0])},d(r){r&&A(e)}}}function Jt(t){let e,n,r,i=t[0]&&He(t);const s=t[3].default,o=Te(s,t,t[2],null);return{c(){e=ve("svg"),i&&i.c(),n=ge(),o&&o.c(),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox",t[1]),c(e,"class","svelte-c8tyih")},m(a,l){U(a,e,l),i&&i.m(e,null),_(e,n),o&&o.m(e,null),r=!0},p(a,[l]){a[0]?i?i.p(a,l):(i=He(a),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&&o.p&&(!r||l&4)&&Pe(o,s,a,a[2],r?Re(s,a[2],l,null):$e(a[2]),null),(!r||l&2)&&c(e,"viewBox",a[1])},i(a){r||(S(o,a),r=!0)},o(a){E(o,a),r=!1},d(a){a&&A(e),i&&i.d(),o&&o.d(a)}}}function xt(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:s=null}=e,{viewBox:o}=e;return t.$$set=a=>{"title"in a&&n(0,s=a.title),"viewBox"in a&&n(1,o=a.viewBox),"$$scope"in a&&n(2,i=a.$$scope)},[s,o,i,r]}class zt extends Y{constructor(e){super(),Q(this,e,xt,Jt,X,{title:0,viewBox:1})}}function Mt(t){let e,n,r;return{c(){e=ve("path"),n=D(),r=ve("path"),c(e,"d","M256 48c-42.9 0-84.2 13-119.2 37.5-34.2 24-60.2 57.2-75.1 96.1L58 192h45.7l1.9-5c8.2-17.8 19.4-33.9 33.5-48 31.2-31.2 72.7-48.4 116.9-48.4s85.7 17.2 116.9 48.4c31.2 31.2 48.4 72.7 48.4 116.9 0 44.1-17.2 85.7-48.4 116.9-31.2 31.2-72.7 48.4-116.9 48.4-44.1 0-85.6-17.2-116.9-48.4-14-14-25.3-30.1-33.5-47.9l-1.9-5H58l3.6 10.4c14.9 38.9 40.9 72.1 75.1 96.1C171.8 451.1 213 464 256 464c114.7 0 208-93.3 208-208S370.7 48 256 48z"),c(r,"d","M48 277.4h189.7l-43.6 44.7L224 352l96-96-96-96-31 29.9 44.7 44.7H48v42.8z")},m(i,s){U(i,e,s),U(i,n,s),U(i,r,s)},p:W,d(i){i&&A(e),i&&A(n),i&&A(r)}}}function Kt(t){let e,n;const r=[{viewBox:"0 0 512 512"},t[0]];let i={$$slots:{default:[Mt]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)i=ye(i,r[s]);return e=new zt({props:i}),{c(){M(e.$$.fragment)},m(s,o){x(e,s,o),n=!0},p(s,[o]){const a=o&1?qt(r,[r[0],Dt(s[0])]):{};o&2&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(S(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function Vt(t,e,n){return t.$$set=r=>{n(0,e=ye(ye({},e),Me(r)))},e=Me(e),[e]}class ft extends Y{constructor(e){super(),Q(this,e,Vt,Kt,X,{})}}const me={apiBase:"http://localhost:8080"},Ht="http://localhost".replace(/\/+$/,"");class Ie{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:Ht}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||dt}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const Wt=new Ie;class Le{constructor(e=Wt){te(this,"middleware");te(this,"fetchApi",async(e,n)=>{let r={url:e,init:n};for(const s of this.middleware)s.pre&&(r=await s.pre({fetch:this.fetchApi,...r})||r);let i;try{i=await(this.configuration.fetchApi||fetch)(r.url,r.init)}catch(s){for(const o of this.middleware)o.onError&&(i=await o.onError({fetch:this.fetchApi,url:r.url,init:r.init,error:s,response:i?i.clone():void 0})||i);if(i!==void 0)throw new Zt(s,"The request failed and the interceptors did not return an alternative response")}for(const s of this.middleware)s.post&&(i=await s.post({fetch:this.fetchApi,url:r.url,init:r.init,response:i.clone()})||i);return i});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const n=this.clone();return n.middleware=n.middleware.concat(...e),n}withPreMiddleware(...e){const n=e.map(r=>({pre:r}));return this.withMiddleware(...n)}withPostMiddleware(...e){const n=e.map(r=>({post:r}));return this.withMiddleware(...n)}async request(e,n){const{url:r,init:i}=await this.createFetchParams(e,n),s=await this.fetchApi(r,i);if(s.status>=200&&s.status<300)return s;throw new Yt(s,"Response returned an error code")}async createFetchParams(e,n){let r=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(r+="?"+this.configuration.queryParamsStringify(e.query));const i=Object.assign({},this.configuration.headers,e.headers);Object.keys(i).forEach(u=>i[u]===void 0?delete i[u]:{});const s=typeof n=="function"?n:async()=>n,o={method:e.method,headers:i,body:e.body,credentials:this.configuration.credentials},a={...o,...await s({init:o,context:e})},l={...a,body:Qt(a.body)||a.body instanceof URLSearchParams||Xt(a.body)?a.body:JSON.stringify(a.body)};return{url:r,init:l}}clone(){const e=this.constructor,n=new e(this.configuration);return n.middleware=this.middleware.slice(),n}}function Xt(t){return typeof Blob!="undefined"&&t instanceof Blob}function Qt(t){return typeof FormData!="undefined"&&t instanceof FormData}class Yt extends Error{constructor(n,r){super(r);te(this,"name","ResponseError");this.response=n}}class Zt extends Error{constructor(n,r){super(r);te(this,"name","FetchError");this.cause=n}}class H extends Error{constructor(n,r){super(r);te(this,"name","RequiredError");this.field=n}}function jt(t,e){const n=t[e];return n!=null}function dt(t,e=""){return Object.keys(t).map(n=>ht(n,t[n],e)).filter(n=>n.length>0).join("&")}function ht(t,e,n=""){const r=n+(n.length?`[${t}]`:t);if(e instanceof Array){const i=e.map(s=>encodeURIComponent(String(s))).join(`&${encodeURIComponent(r)}=`);return`${encodeURIComponent(r)}=${i}`}if(e instanceof Set){const i=Array.from(e);return ht(t,i,n)}return e instanceof Date?`${encodeURIComponent(r)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?dt(e,r):`${encodeURIComponent(r)}=${encodeURIComponent(String(e))}`}function qe(t){for(const e of t)if(e.contentType==="multipart/form-data")return!0;return!1}class Z{constructor(e,n=r=>r){this.raw=e,this.transformer=n}async value(){return this.transformer(await this.raw.json())}}class pe{constructor(e){this.raw=e}async value(){}}function en(t){if(t!==void 0)return t===null?null:{password:t.password,username:t.username}}function Ge(t){return tn(t)}function tn(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}function Ne(t){return nn(t)}function nn(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,name:t.name,refreshToken:t.refresh_token,userId:t.user_id,username:t.username}}function rn(t){return sn(t)}function sn(t,e){return t==null?t:{image:t.image,link:t.link}}function mt(t){if(t!==void 0)return t===null?null:{refresh_token:t.refreshToken}}function De(t){return on(t)}function on(t,e){return t==null?t:{url:jt(t,"url")?t.url:void 0}}function an(t){if(t!==void 0)return t===null?null:{token:t.token}}function ln(t){return un(t)}function un(t,e){return t==null?t:{link:t.link,mediaUrl:t.media_url,tweetId:t.tweet_id}}function cn(t){return fn(t)}function fn(t,e){return t==null?t:{images:t.images.map(ln)}}function pt(t){return dn(t)}function dn(t,e){return t==null?t:{accessSecret:t.access_secret,accessToken:t.access_token}}function hn(t){return mn(t)}function mn(t,e){return t==null?t:{images:t.images.map(rn)}}function gt(t){return pn(t)}function pn(t,e){return t==null?t:{id:t.id,name:t.name}}class gn extends Le{async bookmarksBookmarksGetRaw(e,n){if(e.userId===null||e.userId===void 0)throw new H("userId","Required parameter requestParameters.userId was null or undefined when calling bookmarksBookmarksGet.");const r={};e.userId!==void 0&&(r.user_id=e.userId);const i={};if(this.configuration&&this.configuration.accessToken){const o=this.configuration.accessToken,a=await o("jwt",[]);a&&(i.Authorization=`Bearer ${a}`)}const s=await this.request({path:"/api/pixiv/bookmarks",method:"GET",headers:i,query:r},n);return new pe(s)}async bookmarksBookmarksGet(e,n){await this.bookmarksBookmarksGetRaw(e,n)}async pingPingGetRaw(e){const n={},r={};if(this.configuration&&this.configuration.accessToken){const s=this.configuration.accessToken,o=await s("jwt",[]);o&&(r.Authorization=`Bearer ${o}`)}const i=await this.request({path:"/api/pixiv/ping",method:"GET",headers:r,query:n},e);return new pe(i)}async pingPingGet(e){await this.pingPingGetRaw(e)}async pixivAuthPostRaw(e,n){if(e.login===null||e.login===void 0)throw new H("login","Required parameter requestParameters.login was null or undefined when calling pixivAuthPost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/pixiv/auth/",method:"POST",headers:i,query:r,body:en(e.login)},n);return new Z(s,o=>Ne(o))}async pixivAuthPost(e,n){return await(await this.pixivAuthPostRaw(e,n)).value()}async pixivPostPostPostRaw(e,n){if(e.images===null||e.images===void 0)throw new H("images","Required parameter requestParameters.images was null or undefined when calling pixivPostPostPost.");if(e.tags===null||e.tags===void 0)throw new H("tags","Required parameter requestParameters.tags was null or undefined when calling pixivPostPostPost.");if(e.title===null||e.title===void 0)throw new H("title","Required parameter requestParameters.title was null or undefined when calling pixivPostPostPost.");const r={},i={};if(this.configuration&&this.configuration.accessToken){const d=this.configuration.accessToken,f=await d("jwt",[]);f&&(i.Authorization=`Bearer ${f}`)}const o=qe([{contentType:"multipart/form-data"}]);let a,l=!1;l=o,l?a=new FormData:a=new URLSearchParams,e.images&&e.images.forEach(d=>{a.append("images",d)}),e.tags!==void 0&&a.append("tags",e.tags),e.text!==void 0&&a.append("text",e.text),e.title!==void 0&&a.append("title",e.title);const u=await this.request({path:"/api/pixiv/post",method:"POST",headers:i,query:r,body:a},n);return new Z(u,d=>De(d))}async pixivPostPostPost(e,n){return await(await this.pixivPostPostPostRaw(e,n)).value()}async pixivRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new H("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling pixivRefreshRefreshPost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/pixiv/auth/refresh",method:"POST",headers:i,query:r,body:mt(e.refreshToken)},n);return new Z(s,o=>Ne(o))}async pixivRefreshRefreshPost(e,n){return await(await this.pixivRefreshRefreshPostRaw(e,n)).value()}}class wn extends Le{async redditAuthCallbackCallbackGetRaw(e){const n={},r={},i=await this.request({path:"/api/reddit/auth/callback",method:"GET",headers:r,query:n},e);return new Z(i,s=>Ge(s))}async redditAuthCallbackCallbackGet(e){return await(await this.redditAuthCallbackCallbackGetRaw(e)).value()}async redditAuthGetRaw(e,n){const r={};e.returnTo!==void 0&&(r.return_to=e.returnTo);const i={},s=await this.request({path:"/api/reddit/auth/",method:"GET",headers:i,query:r},n);return new pe(s)}async redditAuthGet(e={},n){await this.redditAuthGetRaw(e,n)}async redditPostPostPostRaw(e,n){if(e.subreddit===null||e.subreddit===void 0)throw new H("subreddit","Required parameter requestParameters.subreddit was null or undefined when calling redditPostPostPost.");if(e.title===null||e.title===void 0)throw new H("title","Required parameter requestParameters.title was null or undefined when calling redditPostPostPost.");const r={},i={};if(this.configuration&&this.configuration.accessToken){const d=this.configuration.accessToken,f=await d("jwt",[]);f&&(i.Authorization=`Bearer ${f}`)}const o=qe([{contentType:"multipart/form-data"}]);let a,l=!1;l=o,l?a=new FormData:a=new URLSearchParams,e.flair!==void 0&&a.append("flair",e.flair),e.images&&e.images.forEach(d=>{a.append("images",d)}),e.subreddit!==void 0&&a.append("subreddit",e.subreddit),e.text!==void 0&&a.append("text",e.text),e.title!==void 0&&a.append("title",e.title);const u=await this.request({path:"/api/reddit/post",method:"POST",headers:i,query:r,body:a},n);return new Z(u,d=>De(d))}async redditPostPostPost(e,n){return await(await this.redditPostPostPostRaw(e,n)).value()}async redditRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new H("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling redditRefreshRefreshPost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/reddit/auth/refresh",method:"POST",headers:i,query:r,body:mt(e.refreshToken)},n);return new Z(s,o=>Ge(o))}async redditRefreshRefreshPost(e,n){return await(await this.redditRefreshRefreshPostRaw(e,n)).value()}async redditRevokeRevokePostRaw(e,n){if(e.token===null||e.token===void 0)throw new H("token","Required parameter requestParameters.token was null or undefined when calling redditRevokeRevokePost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/reddit/auth/revoke",method:"POST",headers:i,query:r,body:an(e.token)},n);return new pe(s)}async redditRevokeRevokePost(e,n){await this.redditRevokeRevokePostRaw(e,n)}async upvotedUpvotedUsernameGetRaw(e,n){if(e.username===null||e.username===void 0)throw new H("username","Required parameter requestParameters.username was null or undefined when calling upvotedUpvotedUsernameGet.");const r={},i={};if(this.configuration&&this.configuration.accessToken){const o=this.configuration.accessToken,a=await o("jwt",[]);a&&(i.Authorization=`Bearer ${a}`)}const s=await this.request({path:"/api/reddit/upvoted/{username}".replace("{username}",encodeURIComponent(String(e.username))),method:"GET",headers:i,query:r},n);return new Z(s,o=>hn(o))}async upvotedUpvotedUsernameGet(e,n){return await(await this.upvotedUpvotedUsernameGetRaw(e,n)).value()}async userUserGetRaw(e){const n={},r={};if(this.configuration&&this.configuration.accessToken){const s=this.configuration.accessToken,o=await s("jwt",[]);o&&(r.Authorization=`Bearer ${o}`)}const i=await this.request({path:"/api/reddit/user",method:"GET",headers:r,query:n},e);return new Z(i,s=>gt(s))}async userUserGet(e){return await(await this.userUserGetRaw(e)).value()}}class _n extends Le{async listTweetsTweetsUsernameGetRaw(e,n){if(e.username===null||e.username===void 0)throw new H("username","Required parameter requestParameters.username was null or undefined when calling listTweetsTweetsUsernameGet.");const r={};e.sinceId!==void 0&&(r.since_id=e.sinceId),e.maxId!==void 0&&(r.max_id=e.maxId),e.count!==void 0&&(r.count=e.count);const i={};this.configuration&&(this.configuration.username!==void 0||this.configuration.password!==void 0)&&(i.Authorization="Basic "+btoa(this.configuration.username+":"+this.configuration.password));const s=await this.request({path:"/api/twitter/tweets/{username}".replace("{username}",encodeURIComponent(String(e.username))),method:"GET",headers:i,query:r},n);return new Z(s,o=>cn(o))}async listTweetsTweetsUsernameGet(e,n){return await(await this.listTweetsTweetsUsernameGetRaw(e,n)).value()}async twitterAuthCallbackCallbackGetRaw(e,n){if(e.oauthVerifier===null||e.oauthVerifier===void 0)throw new H("oauthVerifier","Required parameter requestParameters.oauthVerifier was null or undefined when calling twitterAuthCallbackCallbackGet.");if(e.oauthToken===null||e.oauthToken===void 0)throw new H("oauthToken","Required parameter requestParameters.oauthToken was null or undefined when calling twitterAuthCallbackCallbackGet.");const r={};e.oauthVerifier!==void 0&&(r.oauth_verifier=e.oauthVerifier),e.oauthToken!==void 0&&(r.oauth_token=e.oauthToken);const i={},s=await this.request({path:"/api/twitter/auth/callback",method:"GET",headers:i,query:r},n);return new Z(s,o=>pt(o))}async twitterAuthCallbackCallbackGet(e,n){return await(await this.twitterAuthCallbackCallbackGetRaw(e,n)).value()}async twitterAuthGetRaw(e,n){const r={};e.returnTo!==void 0&&(r.return_to=e.returnTo);const i={},s=await this.request({path:"/api/twitter/auth/",method:"GET",headers:i,query:r},n);return new pe(s)}async twitterAuthGet(e={},n){await this.twitterAuthGetRaw(e,n)}async twitterPostPostPostRaw(e,n){if(e.text===null||e.text===void 0)throw new H("text","Required parameter requestParameters.text was null or undefined when calling twitterPostPostPost.");const r={},i={};this.configuration&&(this.configuration.username!==void 0||this.configuration.password!==void 0)&&(i.Authorization="Basic "+btoa(this.configuration.username+":"+this.configuration.password));const o=qe([{contentType:"multipart/form-data"}]);let a,l=!1;l=o,l?a=new FormData:a=new URLSearchParams,e.images&&e.images.forEach(d=>{a.append("images",d)}),e.text!==void 0&&a.append("text",e.text);const u=await this.request({path:"/api/twitter/post",method:"POST",headers:i,query:r,body:a},n);return new Z(u,d=>De(d))}async twitterPostPostPost(e,n){return await(await this.twitterPostPostPostRaw(e,n)).value()}async userUserGetRaw(e){const n={},r={};this.configuration&&(this.configuration.username!==void 0||this.configuration.password!==void 0)&&(r.Authorization="Basic "+btoa(this.configuration.username+":"+this.configuration.password));const i=await this.request({path:"/api/twitter/user",method:"GET",headers:r,query:n},e);return new Z(i,s=>gt(s))}async userUserGet(e){return await(await this.userUserGetRaw(e)).value()}}const kn="sns-manager-tokens-",wt=localStorage,_t=t=>kn+t,ie=t=>{const e=_t(t);return JSON.parse(wt.getItem(e)||"[]")},kt=(t,e)=>{const n=ie(e);if(n.findIndex(r=>r.token===t.accessToken)===-1){const r=bt(t,e);r?(n.push(r),Be(n,e)):console.log("Invalid token",t)}else console.warn("User is already logged in. Ignoring")},bt=(t,e)=>{const n=e==="twitter",r=e==="pixiv",i=!!t.accessToken,s=n?pt(t):r?i?t:Ne(t):Ge(t);return!s||!s.accessToken||n&&!s.accessSecret?null:{token:s.accessToken,secret:s.accessSecret,refreshToken:s.refreshToken,userId:s.userId,username:s.username}},bn=(t,e,n)=>{const r=ie(n),i=r.findIndex(o=>o.token===t.token),s=bt(e,n);return s?(r[i]=s,Be(r,n),s):(console.log("Invalid token",e),null)},yn=(t,e)=>{const r=ie(e).filter(i=>i.token!==t.token);Be(r,e)},Be=(t,e)=>{const n=_t(e);wt.setItem(n,JSON.stringify(t))};function vn(t){let e,n,r,i,s,o;return r=new ft({}),{c(){e=P("a"),n=P("div"),M(r.$$.fragment),i=D(),s=ne(t[0]),c(n,"class","w-4 h-4"),c(e,"href",t[1]()),c(e,"class","flex flex-row items-center font-bold")},m(a,l){U(a,e,l),_(e,n),x(r,n,null),_(e,i),_(e,s),o=!0},p(a,[l]){(!o||l&1)&&Se(s,a[0])},i(a){o||(S(r.$$.fragment,a),o=!0)},o(a){E(r.$$.fragment,a),o=!1},d(a){a&&A(e),z(r)}}}function Tn(t,e,n){let{provider:r}=e;const i=se(),s=()=>window.location.origin+window.location.pathname,o=()=>`${me.apiBase}/api/${r}/auth?return_to=${encodeURIComponent(s())}`;return ce(()=>{const l=new URLSearchParams(window.location.search).get(r);if(l){const u=JSON.parse(l);kt(u,r),history.replaceState("","",s()),i("login")}}),t.$$set=a=>{"provider"in a&&n(0,r=a.provider)},[r,o]}class Ae extends Y{constructor(e){super(),Q(this,e,Tn,vn,X,{provider:0})}}function Rn(t){let e,n,r;return{c(){e=P("input"),c(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),c(e,"type","text"),c(e,"name",t[4]),e.disabled=t[1],e.required=t[2],c(e,"placeholder",t[3])},m(i,s){U(i,e,s),oe(e,t[0]),n||(r=V(e,"input",t[7]),n=!0)},p(i,s){s&16&&c(e,"name",i[4]),s&2&&(e.disabled=i[1]),s&4&&(e.required=i[2]),s&8&&c(e,"placeholder",i[3]),s&1&&e.value!==i[0]&&oe(e,i[0])},d(i){i&&A(e),n=!1,r()}}}function Pn(t){let e,n,r;return{c(){e=P("input"),c(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),c(e,"type","password"),c(e,"name",t[4]),e.disabled=t[1],e.required=t[2],c(e,"placeholder",t[3])},m(i,s){U(i,e,s),oe(e,t[0]),n||(r=V(e,"input",t[6]),n=!0)},p(i,s){s&16&&c(e,"name",i[4]),s&2&&(e.disabled=i[1]),s&4&&(e.required=i[2]),s&8&&c(e,"placeholder",i[3]),s&1&&e.value!==i[0]&&oe(e,i[0])},d(i){i&&A(e),n=!1,r()}}}function $n(t){let e;function n(s,o){return s[5]?Pn:Rn}let r=n(t),i=r(t);return{c(){i.c(),e=ge()},m(s,o){i.m(s,o),U(s,e,o)},p(s,[o]){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:W,o:W,d(s){i.d(s),s&&A(e)}}}function Sn(t,e,n){let{value:r}=e,{disabled:i=!1}=e,{required:s=!1}=e,{placeholder:o=""}=e,{name:a=""}=e,{password:l=!1}=e;function u(){r=this.value,n(0,r)}function d(){r=this.value,n(0,r)}return t.$$set=f=>{"value"in f&&n(0,r=f.value),"disabled"in f&&n(1,i=f.disabled),"required"in f&&n(2,s=f.required),"placeholder"in f&&n(3,o=f.placeholder),"name"in f&&n(4,a=f.name),"password"in f&&n(5,l=f.password)},[r,i,s,o,a,l,u,d]}class We extends Y{constructor(e){super(),Q(this,e,Sn,$n,X,{value:0,disabled:1,required:2,placeholder:3,name:4,password:5})}}function In(t){let e,n,r,i;const s=t[3].default,o=Te(s,t,t[2],null);return{c(){e=P("button"),o&&o.c(),c(e,"class","disabled:text-gray-500 font-semibold border p-2 rounded"),e.disabled=t[0],c(e,"type",t[1])},m(a,l){U(a,e,l),o&&o.m(e,null),n=!0,r||(i=V(e,"click",t[4]),r=!0)},p(a,[l]){o&&o.p&&(!n||l&4)&&Pe(o,s,a,a[2],n?Re(s,a[2],l,null):$e(a[2]),null),(!n||l&1)&&(e.disabled=a[0]),(!n||l&2)&&c(e,"type",a[1])},i(a){n||(S(o,a),n=!0)},o(a){E(o,a),n=!1},d(a){a&&A(e),o&&o.d(a),r=!1,i()}}}function On(t,e,n){let{$$slots:r={},$$scope:i}=e,{disabled:s=!1}=e,{type:o="button"}=e;function a(l){ut.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,s=l.disabled),"type"in l&&n(1,o=l.type),"$$scope"in l&&n(2,i=l.$$scope)},[s,o,i,r,a]}class An extends Y{constructor(e){super(),Q(this,e,On,In,X,{disabled:0,type:1})}}function En(t){let e;return{c(){e=ne("Login")},m(n,r){U(n,e,r)},d(n){n&&A(e)}}}function Un(t){let e,n,r,i,s,o,a,l,u,d,f,p,k,b,$,I,B,K,y,J,g,T,v,R,N;r=new ft({});function q(h){t[7](h)}let F={name:"username",disabled:t[3],placeholder:"Username",required:!0};t[0]!==void 0&&(F.value=t[0]),k=new We({props:F}),fe.push(()=>Ve(k,"value",q));function w(h){t[8](h)}let G={name:"password",disabled:t[3],placeholder:"Password",required:!0,password:!0};return t[1]!==void 0&&(G.value=t[1]),I=new We({props:G}),fe.push(()=>Ve(I,"value",w)),g=new An({props:{type:"submit",disabled:t[3],$$slots:{default:[En]},$$scope:{ctx:t}}}),{c(){e=P("button"),n=P("div"),M(r.$$.fragment),i=ne(`
  Pixiv`),s=D(),o=P("div"),a=P("div"),l=D(),u=P("div"),d=P("h2"),d.textContent="Pixiv Login",f=D(),p=P("form"),M(k.$$.fragment),$=D(),M(I.$$.fragment),K=D(),y=P("div"),y.textContent="Login might be slow or fail often.",J=D(),M(g.$$.fragment),c(n,"class","w-4 h-4"),c(e,"class","flex flex-row items-center font-bold"),c(a,"class","fixed inset-0 -z-10"),c(d,"class","font-bold"),c(y,"class","text-xs text-gray-500"),c(p,"class","flex flex-col gap-2 justify-center z-10"),c(u,"class","bg-white flex flex-col justify-center items-center p-4 gap-2"),c(o,"class",T=`${t[2]?"flex":"hidden"} fixed justify-center items-center inset-0 backdrop-blur-sm `)},m(h,L){U(h,e,L),_(e,n),x(r,n,null),_(e,i),U(h,s,L),U(h,o,L),_(o,a),_(o,l),_(o,u),_(u,d),_(u,f),_(u,p),x(k,p,null),_(p,$),x(I,p,null),_(p,K),_(p,y),_(p,J),x(g,p,null),v=!0,R||(N=[V(e,"click",t[5]),V(a,"click",t[6]),V(p,"submit",It(t[9]))],R=!0)},p(h,[L]){const m={};L&8&&(m.disabled=h[3]),!b&&L&1&&(b=!0,m.value=h[0],Ke(()=>b=!1)),k.$set(m);const O={};L&8&&(O.disabled=h[3]),!B&&L&2&&(B=!0,O.value=h[1],Ke(()=>B=!1)),I.$set(O);const C={};L&8&&(C.disabled=h[3]),L&2048&&(C.$$scope={dirty:L,ctx:h}),g.$set(C),(!v||L&4&&T!==(T=`${h[2]?"flex":"hidden"} fixed justify-center items-center inset-0 backdrop-blur-sm `))&&c(o,"class",T)},i(h){v||(S(r.$$.fragment,h),S(k.$$.fragment,h),S(I.$$.fragment,h),S(g.$$.fragment,h),v=!0)},o(h){E(r.$$.fragment,h),E(k.$$.fragment,h),E(I.$$.fragment,h),E(g.$$.fragment,h),v=!1},d(h){h&&A(e),z(r),h&&A(s),h&&A(o),z(k),z(I),z(g),R=!1,ee(N)}}}const Fn="pixiv";function Cn(t,e,n){const r=se();let i="",s="",o=!1,a=!1;const l=async()=>{const b=new gn(new Ie({basePath:me.apiBase}));n(3,a=!0);try{const $=await b.pixivAuthPost({login:{username:i,password:s}});kt($,Fn),r("login"),n(2,o=!1),n(0,i=""),n(1,s="")}catch($){console.log("Failed to login to pixiv",$)}finally{n(3,a=!1)}},u=()=>n(2,o=!o),d=()=>n(2,o=!1);function f(b){i=b,n(0,i)}function p(b){s=b,n(1,s)}return[i,s,o,a,l,u,d,f,p,()=>l()]}class Gn extends Y{constructor(e){super(),Q(this,e,Cn,Un,X,{})}}function Nn(t){let e,n;const r=t[2].default,i=Te(r,t,t[1],null);return{c(){e=P("a"),i&&i.c(),c(e,"href",t[0]),c(e,"class","text-blue-900 hover:underline"),c(e,"target","_blank")},m(s,o){U(s,e,o),i&&i.m(e,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&2)&&Pe(i,r,s,s[1],n?Re(r,s[1],o,null):$e(s[1]),null),(!n||o&1)&&c(e,"href",s[0])},i(s){n||(S(i,s),n=!0)},o(s){E(i,s),n=!1},d(s){s&&A(e),i&&i.d(s)}}}function Ln(t,e,n){let{$$slots:r={},$$scope:i}=e,{url:s}=e;return t.$$set=o=>{"url"in o&&n(0,s=o.url),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}class qn extends Y{constructor(e){super(),Q(this,e,Ln,Nn,X,{url:0})}}const Dn="https://oauth.reddit.com";class Bn{constructor(e,n="web:social-media-manager:0.0.1 (by /u/illu11)"){te(this,"headers");te(this,"client");this.client=new wn(new Ie({basePath:me.apiBase,headers:{Authorization:`Bearer ${e}`}})),this.headers={Authorization:`Bearer ${e}`,"User-Agent":n}}async getJson(e){const n=await fetch(Dn+e,{headers:this.headers});return n.status!==200?null:await n.json()}async refreshToken(e){const n=await fetch(me.apiBase+"/api/reddit/auth/refresh",{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});return n.status!==200?null:n.json()}async getUser(){return this.client.userUserGet()}async getUpvoted(e){return this.client.upvotedUpvotedUsernameGet({username:e}).then(n=>n.images)}}var j=(t=>(t[t.LOADING=0]="LOADING",t[t.LOADED=1]="LOADED",t[t.FINISHED=2]="FINISHED",t[t.ERROR=3]="ERROR",t))(j||{});function Jn(t){let e,n,r,i,s,o,a;return{c(){e=P("div"),n=P("a"),r=P("img"),ze(r.src,i=t[0].image)||c(r,"src",i),c(r,"alt","close up of reference"),c(r,"class","max-h-[75vh] mx-auto"),c(n,"href",s=t[0].link),c(n,"target","_blank"),c(e,"class","fixed inset-0 flex items-center backdrop-blur justify-center"),Et(e,"background","rgba(0,0,0,0.75)")},m(l,u){U(l,e,u),_(e,n),_(n,r),o||(a=[V(n,"click",Ot(t[2])),V(e,"click",t[3])],o=!0)},p(l,[u]){u&1&&!ze(r.src,i=l[0].image)&&c(r,"src",i),u&1&&s!==(s=l[0].link)&&c(n,"href",s)},i:W,o:W,d(l){l&&A(e),o=!1,ee(a)}}}function xn(t,e,n){let{image:r}=e;const i=se();function s(a){ut.call(this,t,a)}const o=()=>i("close");return t.$$set=a=>{"image"in a&&n(0,r=a.image)},[r,i,s,o]}class zn extends Y{constructor(e){super(),Q(this,e,xn,Jn,X,{image:0})}}function Xe(t,e,n){const r=t.slice();return r[16]=e[n],r}function Mn(t){let e,n;return{c(){e=P("span"),n=ne(t[3])},m(r,i){U(r,e,i),_(e,n)},p(r,i){i&8&&Se(n,r[3])},i:W,o:W,d(r){r&&A(e)}}}function Kn(t){let e,n;return e=new qn({props:{url:t[4],$$slots:{default:[Vn]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,i){const s={};i&16&&(s.url=r[4]),i&524296&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}function Vn(t){let e;return{c(){e=ne(t[3])},m(n,r){U(n,e,r)},p(n,r){r&8&&Se(e,n[3])},d(n){n&&A(e)}}}function Qe(t){let e,n,r;return{c(){e=P("button"),e.textContent="x",c(e,"class","font-bold")},m(i,s){U(i,e,s),n||(r=V(e,"click",t[11]),n=!0)},p:W,d(i){i&&A(e),n=!1,r()}}}function Ye(t){let e,n,r,i;function s(){return t[12](t[16])}return{c(){e=P("button"),c(e,"class","w-full bg-cover"),c(e,"style",n=`background-image: url(${t[16].image}); height: ${t[7]}px; width: ${t[8]}px`)},m(o,a){U(o,e,a),r||(i=V(e,"click",s),r=!0)},p(o,a){t=o,a&385&&n!==(n=`background-image: url(${t[16].image}); height: ${t[7]}px; width: ${t[8]}px`)&&c(e,"style",n)},d(o){o&&A(e),r=!1,i()}}}function Hn(t){let e;return{c(){e=P("div"),e.textContent="Error loading the data",c(e,"class","p-8 text-red-600")},m(n,r){U(n,e,r)},p:W,d(n){n&&A(e)}}}function Wn(t){let e;return{c(){e=P("div"),e.textContent="LOADING",c(e,"class","p-8")},m(n,r){U(n,e,r)},p:W,d(n){n&&A(e)}}}function Xn(t){let e,n,r;return{c(){e=P("button"),e.textContent="Load More...",c(e,"class","p-8")},m(i,s){U(i,e,s),n||(r=V(e,"click",t[14]),n=!0)},p:W,d(i){i&&A(e),n=!1,r()}}}function Ze(t){let e,n;return e=new zn({props:{image:t[6]}}),e.$on("close",t[15]),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,i){const s={};i&64&&(s.image=r[6]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}function Qn(t){let e,n,r,i,s,o,a,l,u,d,f,p,k,b,$,I,B;const K=[Kn,Mn],y=[];function J(w,G){return w[4]?0:1}i=J(t),s=y[i]=K[i](t);let g=!t[2]&&Qe(t),T=t[0],v=[];for(let w=0;w<T.length;w+=1)v[w]=Ye(Xe(t,T,w));function R(w,G){if(w[1]==j.LOADED)return Xn;if(w[1]==j.LOADING)return Wn;if(w[1]==j.ERROR)return Hn}let N=R(t),q=N&&N(t),F=t[6]&&Ze(t);return{c(){e=P("div"),n=P("div"),r=P("div"),s.c(),o=D(),a=P("button"),a.textContent="v",l=D(),g&&g.c(),u=D(),d=P("div");for(let w=0;w<v.length;w+=1)v[w].c();f=D(),p=P("div"),q&&q.c(),k=D(),F&&F.c(),b=ge(),c(a,"class","font-bold"),c(r,"class","flex gap-2"),c(n,"class","flex justify-between p-2"),c(d,"class","flex flex-wrap"),c(p,"class","flex flex-col items-center text-gray-500 text-sm text-center"),c(e,"class","flex flex-col gap-2 grow")},m(w,G){U(w,e,G),_(e,n),_(n,r),y[i].m(r,null),_(r,o),_(r,a),_(n,l),g&&g.m(n,null),_(e,u),_(e,d);for(let h=0;h<v.length;h+=1)v[h].m(d,null);t[13](d),_(e,f),_(e,p),q&&q.m(p,null),U(w,k,G),F&&F.m(w,G),U(w,b,G),$=!0,I||(B=V(a,"click",t[10]),I=!0)},p(w,[G]){let h=i;if(i=J(w),i===h?y[i].p(w,G):(de(),E(y[h],1,1,()=>{y[h]=null}),he(),s=y[i],s?s.p(w,G):(s=y[i]=K[i](w),s.c()),S(s,1),s.m(r,o)),w[2]?g&&(g.d(1),g=null):g?g.p(w,G):(g=Qe(w),g.c(),g.m(n,null)),G&449){T=w[0];let L;for(L=0;L<T.length;L+=1){const m=Xe(w,T,L);v[L]?v[L].p(m,G):(v[L]=Ye(m),v[L].c(),v[L].m(d,null))}for(;L<v.length;L+=1)v[L].d(1);v.length=T.length}N===(N=R(w))&&q?q.p(w,G):(q&&q.d(1),q=N&&N(w),q&&(q.c(),q.m(p,null))),w[6]?F?(F.p(w,G),G&64&&S(F,1)):(F=Ze(w),F.c(),S(F,1),F.m(b.parentNode,b)):F&&(de(),E(F,1,1,()=>{F=null}),he())},i(w){$||(S(s),S(F),$=!0)},o(w){E(s),E(F),$=!1},d(w){w&&A(e),y[i].d(),g&&g.d(),at(v,w),t[13](null),q&&q.d(),w&&A(k),F&&F.d(w),w&&A(b),I=!1,B()}}}function Yn(t,e,n){let r,i,{images:s=[]}=e,{status:o=j.FINISHED}=e,{focused:a=!1}=e,{text:l=""}=e,{textLink:u=""}=e;const d=se();let f,p;const k=()=>d("toggleFocus"),b=()=>d("remove"),$=y=>n(6,f=y);function I(y){fe[y?"unshift":"push"](()=>{p=y,n(5,p)})}const B=()=>d("load"),K=()=>n(6,f=void 0);return t.$$set=y=>{"images"in y&&n(0,s=y.images),"status"in y&&n(1,o=y.status),"focused"in y&&n(2,a=y.focused),"text"in y&&n(3,l=y.text),"textLink"in y&&n(4,u=y.textLink)},t.$$.update=()=>{t.$$.dirty&32&&n(8,r=p==null?void 0:p.offsetWidth),t.$$.dirty&32&&n(7,i=(p==null?void 0:p.offsetWidth)*1.1)},[s,o,a,l,u,p,f,i,r,d,k,b,$,I,B,K]}class yt extends Y{constructor(e){super(),Q(this,e,Yn,Qn,X,{images:0,status:1,focused:2,text:3,textLink:4})}}function Zn(t){let e,n,r;const i=t[3].default,s=Te(i,t,t[2],null);return{c(){e=P("div"),s&&s.c(),c(e,"class",n=`${t[0]?"basis-full":"basis-1/6"} ${t[1]?"flex":"hidden"}`)},m(o,a){U(o,e,a),s&&s.m(e,null),r=!0},p(o,[a]){s&&s.p&&(!r||a&4)&&Pe(s,i,o,o[2],r?Re(i,o[2],a,null):$e(o[2]),null),(!r||a&3&&n!==(n=`${o[0]?"basis-full":"basis-1/6"} ${o[1]?"flex":"hidden"}`))&&c(e,"class",n)},i(o){r||(S(s,o),r=!0)},o(o){E(s,o),r=!1},d(o){o&&A(e),s&&s.d(o)}}}function jn(t,e,n){let r,{$$slots:i={},$$scope:s}=e,{focused:o}=e;return t.$$set=a=>{"focused"in a&&n(0,o=a.focused),"$$scope"in a&&n(2,s=a.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&n(1,r=o||o==null)},[o,r,s,i]}class vt extends Y{constructor(e){super(),Q(this,e,jn,Zn,X,{focused:0})}}function je(t){let e,n;return e=new yt({props:{images:t[1],text:"Reddit: "+t[0],textLink:`https://reddit.com/u/${t[0]}/upvoted`,focused:t[2]}}),e.$on("toggleFocus",t[6]),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,i){const s={};i&2&&(s.images=r[1]),i&1&&(s.text="Reddit: "+r[0]),i&1&&(s.textLink=`https://reddit.com/u/${r[0]}/upvoted`),i&4&&(s.focused=r[2]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}function er(t){let e,n,r=t[0]&&je(t);return{c(){r&&r.c(),e=ge()},m(i,s){r&&r.m(i,s),U(i,e,s),n=!0},p(i,s){i[0]?r?(r.p(i,s),s&1&&S(r,1)):(r=je(i),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(de(),E(r,1,1,()=>{r=null}),he())},i(i){n||(S(r),n=!0)},o(i){E(r),n=!1},d(i){r&&r.d(i),i&&A(e)}}}function tr(t){let e,n;return e=new vt({props:{focused:t[2],$$slots:{default:[er]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,[i]){const s={};i&4&&(s.focused=r[2]),i&4103&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}const et="reddit-";function nr(t,e,n){let r,{token:i}=e,{focused:s}=e,o=[],a;const l=se(),u=new Bn(i.token);ce(async()=>{await f(i),a&&n(1,o=await u.getUpvoted(a))});const d=()=>{s?l("unfocus"):l("focus",{username:et+a})},f=async $=>{const I=await u.getUser();I==null?await p($):n(0,a=I.name)},p=async $=>{if($.refreshToken){console.log("Refreshing reddit token");const I=await u.refreshToken($.refreshToken);I?($=bn($,I,"reddit"),$?l("refresh"):(console.log("Failed to read token"),k())):(console.log("Failed to get new token. Removing current token"),k())}},k=()=>{yn(i,"reddit"),l("refresh")},b=()=>d();return t.$$set=$=>{"token"in $&&n(4,i=$.token),"focused"in $&&n(5,s=$.focused)},t.$$.update=()=>{t.$$.dirty&33&&n(2,r=s==null?null:s===et+a)},[a,o,r,d,i,s,b]}class rr extends Y{constructor(e){super(),Q(this,e,nr,tr,X,{token:4,focused:5})}}function ir(t){let e,n;return e=new yt({props:{images:t[2],text:t[0],textLink:`https://twitter.com/${t[0]}/media`,status:t[1],focused:t[3]}}),e.$on("remove",t[8]),e.$on("load",t[9]),e.$on("toggleFocus",t[10]),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,i){const s={};i&4&&(s.images=r[2]),i&1&&(s.text=r[0]),i&1&&(s.textLink=`https://twitter.com/${r[0]}/media`),i&2&&(s.status=r[1]),i&8&&(s.focused=r[3]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}function sr(t){let e,n;return e=new vt({props:{focused:t[3],$$slots:{default:[ir]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,[i]){const s={};i&8&&(s.focused=r[3]),i&262159&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}const or=100,ar=30;function lr(t,e,n){let r,{user:i}=e,{focused:s}=e;const o=new _n(new Ie({basePath:me.apiBase})),a=se();let l=j.LOADED,u,d,f=[];const p=`sns-manager-twitter-ref-cache-${i}`,k=()=>a("remove"),b=()=>a(s?"unfocus":"focus");ce(()=>{I(),$(i,null,d,!1)});const $=async(g,T=u,v=void 0,R=!0)=>{n(1,l=j.LOADING);try{const N=await o.listTweetsTweetsUsernameGet({username:g,maxId:T!=null?T:void 0,sinceId:v!=null?v:void 0,count:or});if(N.images.length===0){R?n(1,l=j.FINISHED):n(1,l=j.LOADED);return}const q=N.images[N.images.length-1];(!u||q.tweetId.length<u.length||q.tweetId.localeCompare(u)<0)&&(u=q.tweetId);const F=N.images[0].tweetId;(!d||F.length>d.length||F.localeCompare(d)>0)&&(d=F);const w=N.images.map(G=>({image:G.mediaUrl,link:G.link}));T==null?n(2,f=[...w,...f]):n(2,f=[...f,...w]),n(1,l=j.LOADED),B()}catch(N){console.error(N),n(1,l=j.ERROR)}},I=()=>{const g=JSON.parse(localStorage.getItem(p)||"{}");n(2,f=g.images||[]),d=g.firstId,u=g.lastId},B=()=>{localStorage.setItem(p,JSON.stringify({images:f.slice(0,ar),lastId:u,firstId:d}))},K=()=>k(),y=()=>$(i),J=()=>b();return t.$$set=g=>{"user"in g&&n(0,i=g.user),"focused"in g&&n(7,s=g.focused)},t.$$.update=()=>{t.$$.dirty&129&&n(3,r=s==null?null:s===i)},[i,l,f,r,k,b,$,s,K,y,J]}class ur extends Y{constructor(e){super(),Q(this,e,lr,sr,X,{user:0,focused:7})}}function cr(t){let e,n,r,i,s;return{c(){e=P("h1"),e.textContent="Twitter",n=D(),r=P("input"),c(e,"class","font-bold text-xl"),c(r,"class","border"),c(r,"placeholder","add user")},m(o,a){U(o,e,a),U(o,n,a),U(o,r,a),oe(r,t[0]),i||(s=[V(r,"input",t[2]),V(r,"keydown",t[1])],i=!0)},p(o,[a]){a&1&&r.value!==o[0]&&oe(r,o[0])},i:W,o:W,d(o){o&&A(e),o&&A(n),o&&A(r),i=!1,ee(s)}}}function fr(t,e,n){let r="";const i=se(),s=a=>{a.key=="Enter"&&(i("add",{user:r}),n(0,r=""))};function o(){r=this.value,n(0,r)}return[r,s,o]}class dr extends Y{constructor(e){super(),Q(this,e,fr,cr,X,{})}}function tt(t,e,n){const r=t.slice();return r[24]=e[n],r}function nt(t,e,n){const r=t.slice();return r[27]=e[n],r}function rt(t,e){let n,r,i;function s(){return e[16](e[27])}function o(){return e[17](e[27])}return r=new ur({props:{user:e[27],focused:e[3]}}),r.$on("remove",s),r.$on("focus",o),r.$on("unfocus",e[18]),{key:t,first:null,c(){n=ge(),M(r.$$.fragment),this.first=n},m(a,l){U(a,n,l),x(r,a,l),i=!0},p(a,l){e=a;const u={};l&4&&(u.user=e[27]),l&8&&(u.focused=e[3]),r.$set(u)},i(a){i||(S(r.$$.fragment,a),i=!0)},o(a){E(r.$$.fragment,a),i=!1},d(a){a&&A(n),z(r,a)}}}function it(t){let e,n;return e=new rr({props:{token:t[24],focused:t[3]}}),e.$on("focus",t[19]),e.$on("unfocus",t[20]),{c(){M(e.$$.fragment)},m(r,i){x(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.token=r[24]),i&8&&(s.focused=r[3]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){z(e,r)}}}function hr(t){let e,n,r,i,s,o,a,l,u,d,f,p,k,b,$,I,B,K,y,J,g=[],T=new Map,v,R,N,q;s=new Ae({props:{provider:"twitter"}}),s.$on("login",t[10]),a=new Ae({props:{provider:"reddit"}}),a.$on("login",t[11]),u=new Ae({props:{provider:"pinterest"}}),u.$on("login",t[12]),f=new Gn({}),f.$on("login",t[13]),I=new dr({}),I.$on("add",t[15]);let F=t[2];const w=m=>m[27];for(let m=0;m<F.length;m+=1){let O=nt(t,F,m),C=w(O);T.set(C,g[m]=rt(C,O))}let G=t[0],h=[];for(let m=0;m<G.length;m+=1)h[m]=it(tt(t,G,m));const L=m=>E(h[m],1,1,()=>{h[m]=null});return{c(){e=P("div"),n=P("header"),r=P("button"),r.textContent="Open Sidebar",i=D(),M(s.$$.fragment),o=D(),M(a.$$.fragment),l=D(),M(u.$$.fragment),d=D(),M(f.$$.fragment),p=D(),k=P("div"),b=P("button"),b.textContent="x",$=D(),M(I.$$.fragment),K=D(),y=P("main"),J=P("div");for(let m=0;m<g.length;m+=1)g[m].c();v=D();for(let m=0;m<h.length;m+=1)h[m].c();c(n,"class","flex flex-row justify-center gap-4 border-b p-2"),c(k,"class",B="absolute inset-y-0 left-0 bg-red-300 w-80 "+(t[1]?"block":"hidden")),c(J,"class","flex grow"),c(y,"class","p-4 flex"),c(e,"class","h-full flex flex-col")},m(m,O){U(m,e,O),_(e,n),_(n,r),_(n,i),x(s,n,null),_(n,o),x(a,n,null),_(n,l),x(u,n,null),_(n,d),x(f,n,null),_(e,p),_(e,k),_(k,b),_(k,$),x(I,k,null),_(e,K),_(e,y),_(y,J);for(let C=0;C<g.length;C+=1)g[C].m(J,null);_(J,v);for(let C=0;C<h.length;C+=1)h[C].m(J,null);R=!0,N||(q=[V(r,"click",t[9]),V(b,"click",t[14])],N=!0)},p(m,[O]){if((!R||O&2&&B!==(B="absolute inset-y-0 left-0 bg-red-300 w-80 "+(m[1]?"block":"hidden")))&&c(k,"class",B),O&124&&(F=m[2],de(),g=Lt(g,O,w,1,m,F,T,J,Nt,rt,v,nt),he()),O&57){G=m[0];let C;for(C=0;C<G.length;C+=1){const Je=tt(m,G,C);h[C]?(h[C].p(Je,O),S(h[C],1)):(h[C]=it(Je),h[C].c(),S(h[C],1),h[C].m(J,null))}for(de(),C=G.length;C<h.length;C+=1)L(C);he()}},i(m){if(!R){S(s.$$.fragment,m),S(a.$$.fragment,m),S(u.$$.fragment,m),S(f.$$.fragment,m),S(I.$$.fragment,m);for(let O=0;O<F.length;O+=1)S(g[O]);for(let O=0;O<G.length;O+=1)S(h[O]);R=!0}},o(m){E(s.$$.fragment,m),E(a.$$.fragment,m),E(u.$$.fragment,m),E(f.$$.fragment,m),E(I.$$.fragment,m);for(let O=0;O<g.length;O+=1)E(g[O]);h=h.filter(Boolean);for(let O=0;O<h.length;O+=1)E(h[O]);R=!1},d(m){m&&A(e),z(s),z(a),z(u),z(f),z(I);for(let O=0;O<g.length;O+=1)g[O].d();at(h,m),N=!1,ee(q)}}}const Ee="sns-manager-twitter-reference-users";function mr(t,e,n){let r=[],i=!1,s=[],o;const a=R=>{n(3,o=R)},l=()=>n(3,o=void 0);ce(async()=>{n(2,s=JSON.parse(localStorage.getItem(Ee)||"[]"))});const u=R=>{n(2,s=s.filter(N=>N!==R)),localStorage.setItem(Ee,JSON.stringify(s))},d=R=>{n(2,s=[...s,R]),localStorage.setItem(Ee,JSON.stringify(s))},f=()=>{ie("twitter"),n(0,r=ie("reddit")),ie("pixiv"),ie("pinterest")};return ce(()=>f()),[r,i,s,o,a,l,u,d,f,()=>n(1,i=!i),()=>f(),()=>f(),()=>f(),()=>f(),()=>n(1,i=!1),R=>d(R.detail.user),R=>u(R),R=>a(R),()=>l(),R=>a(R.detail.username),()=>l()]}class pr extends Y{constructor(e){super(),Q(this,e,mr,hr,X,{})}}new pr({target:document.getElementById("app")});
