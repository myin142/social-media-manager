var tt=Object.defineProperty;var nt=(t,e,n)=>e in t?tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C=(t,e,n)=>(nt(t,typeof e!="symbol"?e+"":e,n),n);const rt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};rt();function B(){}function ee(t,e){for(const n in e)t[n]=e[n];return t}function Be(t){return t()}function ke(){return Object.create(null)}function U(t){t.forEach(Be)}function it(t){return typeof t=="function"}function E(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}function H(t,e,n,i){if(t){const r=xe(t,e,n,i);return t[0](r)}}function xe(t,e,n,i){return t[1]&&i?ee(n.ctx.slice(),t[1](i(e))):n.ctx}function j(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],s=Math.max(e.dirty.length,r.length);for(let l=0;l<s;l+=1)o[l]=e.dirty[l]|r[l];return o}return e.dirty|r}return e.dirty}function V(t,e,n,i,r,o){if(r){const s=xe(e,n,i,o);t.p(s,r)}}function G(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Pe(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function $(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function Ue(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function te(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function R(){return N(" ")}function pe(){return N("")}function x(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function st(t){return function(e){return e.preventDefault(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function lt(t){return Array.from(t.childNodes)}function ge(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ne(t,e){t.value=e==null?"":e}function at(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}let K;function z(t){K=t}function Je(){if(!K)throw new Error("Function called outside component initialization");return K}function ie(t){Je().$$.on_mount.push(t)}function De(){const t=Je();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=at(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function ut(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const M=[],re=[],Y=[],de=[],ct=Promise.resolve();let he=!1;function ft(){he||(he=!0,ct.then(Me))}function me(t){Y.push(t)}function Te(t){de.push(t)}const ue=new Set;let Q=0;function Me(){const t=K;do{for(;Q<M.length;){const e=M[Q];Q++,z(e),dt(e.$$)}for(z(null),M.length=0,Q=0;re.length;)re.pop()();for(let e=0;e<Y.length;e+=1){const n=Y[e];ue.has(n)||(ue.add(n),n())}Y.length=0}while(M.length);for(;de.length;)de.pop()();he=!1,ue.clear(),z(t)}function dt(t){if(t.fragment!==null){t.update(),U(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(me)}}const Z=new Set;let F;function ze(){F={r:0,c:[],p:F}}function Ke(){F.r||U(F.c),F=F.p}function h(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function _(t,e,n,i){if(t&&t.o){if(Z.has(t))return;Z.add(t),F.c.push(()=>{Z.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ht(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const s=t[o],l=e[o];if(l){for(const a in s)a in l||(i[a]=1);for(const a in l)r[a]||(n[a]=l[a],r[a]=1);t[o]=l}else for(const a in s)r[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function mt(t){return typeof t=="object"&&t!==null?t:{}}function Re(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function T(t){t&&t.c()}function k(t,e,n,i){const{fragment:r,on_mount:o,on_destroy:s,after_update:l}=t.$$;r&&r.m(e,n),i||me(()=>{const a=o.map(Be).filter(it);s?s.push(...a):U(a),t.$$.on_mount=[]}),l.forEach(me)}function P(t,e){const n=t.$$;n.fragment!==null&&(U(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,e){t.$$.dirty[0]===-1&&(M.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(t,e,n,i,r,o,s,l=[-1]){const a=K;z(t);const f=t.$$={fragment:null,ctx:null,props:o,update:B,not_equal:r,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ke(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(f.root);let b=!1;if(f.ctx=n?n(t,e.props||{},(u,w,...S)=>{const g=S.length?S[0]:w;return f.ctx&&r(f.ctx[u],f.ctx[u]=g)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](g),b&&pt(t,u)),w}):[],f.update(),b=!0,U(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const u=lt(e.target);f.fragment&&f.fragment.l(u),u.forEach(m)}else f.fragment&&f.fragment.c();e.intro&&h(t.$$.fragment),k(t,e.target,e.anchor,e.customElement),Me()}z(a)}class O{$destroy(){P(this,1),this.$destroy=B}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const gt="http://localhost".replace(/\/+$/,"");class He{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:gt}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||je}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const _t=new He;class wt{constructor(e=_t){C(this,"middleware");C(this,"fetchApi",async(e,n)=>{let i={url:e,init:n};for(const o of this.middleware)o.pre&&(i=await o.pre({fetch:this.fetchApi,...i})||i);let r;try{r=await(this.configuration.fetchApi||fetch)(i.url,i.init)}catch(o){for(const s of this.middleware)s.onError&&(r=await s.onError({fetch:this.fetchApi,url:i.url,init:i.init,error:o,response:r?r.clone():void 0})||r);if(r!==void 0)throw new yt(o,"The request failed and the interceptors did not return an alternative response")}for(const o of this.middleware)o.post&&(r=await o.post({fetch:this.fetchApi,url:i.url,init:i.init,response:r.clone()})||r);return r});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const n=this.clone();return n.middleware=n.middleware.concat(...e),n}withPreMiddleware(...e){const n=e.map(i=>({pre:i}));return this.withMiddleware(...n)}withPostMiddleware(...e){const n=e.map(i=>({post:i}));return this.withMiddleware(...n)}async request(e,n){const{url:i,init:r}=await this.createFetchParams(e,n),o=await this.fetchApi(i,r);if(o.status>=200&&o.status<300)return o;throw new vt(o,"Response returned an error code")}async createFetchParams(e,n){let i=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(i+="?"+this.configuration.queryParamsStringify(e.query));const r=Object.assign({},this.configuration.headers,e.headers);Object.keys(r).forEach(f=>r[f]===void 0?delete r[f]:{});const o=typeof n=="function"?n:async()=>n,s={method:e.method,headers:r,body:e.body,credentials:this.configuration.credentials},l={...s,...await o({init:s,context:e})},a={...l,body:$t(l.body)||l.body instanceof URLSearchParams||bt(l.body)?l.body:JSON.stringify(l.body)};return{url:i,init:a}}clone(){const e=this.constructor,n=new e(this.configuration);return n.middleware=this.middleware.slice(),n}}function bt(t){return typeof Blob!="undefined"&&t instanceof Blob}function $t(t){return typeof FormData!="undefined"&&t instanceof FormData}class vt extends Error{constructor(n,i){super(i);C(this,"name","ResponseError");this.response=n}}class yt extends Error{constructor(n,i){super(i);C(this,"name","FetchError");this.cause=n}}class D extends Error{constructor(n,i){super(i);C(this,"name","RequiredError");this.field=n}}function kt(t,e){const n=t[e];return n!=null}function je(t,e=""){return Object.keys(t).map(n=>Ve(n,t[n],e)).filter(n=>n.length>0).join("&")}function Ve(t,e,n=""){const i=n+(n.length?`[${t}]`:t);if(e instanceof Array){const r=e.map(o=>encodeURIComponent(String(o))).join(`&${encodeURIComponent(i)}=`);return`${encodeURIComponent(i)}=${r}`}if(e instanceof Set){const r=Array.from(e);return Ve(t,r,n)}return e instanceof Date?`${encodeURIComponent(i)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?je(e,i):`${encodeURIComponent(i)}=${encodeURIComponent(String(e))}`}function Pt(t){for(const e of t)if(e.contentType==="multipart/form-data")return!0;return!1}class ce{constructor(e,n=i=>i){this.raw=e,this.transformer=n}async value(){return this.transformer(await this.raw.json())}}function Tt(t){if(t!==void 0)return t===null?null:{password:t.password,username:t.username}}function Rt(t){return St(t)}function St(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}function Se(t){return Lt(t)}function Lt(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,name:t.name,refreshToken:t.refresh_token,userId:t.user_id,username:t.username}}function Et(t){if(t!==void 0)return t===null?null:{refresh_token:t.refreshToken}}function At(t){return Ot(t)}function Ot(t,e){return t==null?t:{url:kt(t,"url")?t.url:void 0}}function It(t){return Nt(t)}function Nt(t,e){return t==null?t:{accessSecret:t.access_secret,accessToken:t.access_token}}class qt extends wt{async pixivAuthPostRaw(e,n){if(e.login===null||e.login===void 0)throw new D("login","Required parameter requestParameters.login was null or undefined when calling pixivAuthPost.");const i={},r={};r["Content-Type"]="application/json";const o=await this.request({path:"/api/pixiv/auth/",method:"POST",headers:r,query:i,body:Tt(e.login)},n);return new ce(o,s=>Se(s))}async pixivAuthPost(e,n){return await(await this.pixivAuthPostRaw(e,n)).value()}async pixivPostPostPostRaw(e,n){if(e.images===null||e.images===void 0)throw new D("images","Required parameter requestParameters.images was null or undefined when calling pixivPostPostPost.");if(e.tags===null||e.tags===void 0)throw new D("tags","Required parameter requestParameters.tags was null or undefined when calling pixivPostPostPost.");if(e.title===null||e.title===void 0)throw new D("title","Required parameter requestParameters.title was null or undefined when calling pixivPostPostPost.");const i={},r={};if(this.configuration&&this.configuration.accessToken){const b=this.configuration.accessToken,u=await b("jwt",[]);u&&(r.Authorization=`Bearer ${u}`)}const s=Pt([{contentType:"multipart/form-data"}]);let l,a=!1;a=s,a?l=new FormData:l=new URLSearchParams,e.images&&e.images.forEach(b=>{l.append("images",b)}),e.tags!==void 0&&l.append("tags",e.tags),e.text!==void 0&&l.append("text",e.text),e.title!==void 0&&l.append("title",e.title);const f=await this.request({path:"/api/pixiv/post",method:"POST",headers:r,query:i,body:l},n);return new ce(f,b=>At(b))}async pixivPostPostPost(e,n){return await(await this.pixivPostPostPostRaw(e,n)).value()}async pixivRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new D("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling pixivRefreshRefreshPost.");const i={},r={};r["Content-Type"]="application/json";const o=await this.request({path:"/api/pixiv/auth/refresh",method:"POST",headers:r,query:i,body:Et(e.refreshToken)},n);return new ce(o,s=>Se(s))}async pixivRefreshRefreshPost(e,n){return await(await this.pixivRefreshRefreshPostRaw(e,n)).value()}}function Le(t){let e,n;return{c(){e=te("title"),n=N(t[0])},m(i,r){p(i,e,r),$(e,n)},p(i,r){r&1&&ge(n,i[0])},d(i){i&&m(e)}}}function Ct(t){let e,n,i,r=t[0]&&Le(t);const o=t[3].default,s=H(o,t,t[2],null);return{c(){e=te("svg"),r&&r.c(),n=pe(),s&&s.c(),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox",t[1]),c(e,"class","svelte-c8tyih")},m(l,a){p(l,e,a),r&&r.m(e,null),$(e,n),s&&s.m(e,null),i=!0},p(l,[a]){l[0]?r?r.p(l,a):(r=Le(l),r.c(),r.m(e,n)):r&&(r.d(1),r=null),s&&s.p&&(!i||a&4)&&V(s,o,l,l[2],i?j(o,l[2],a,null):G(l[2]),null),(!i||a&2)&&c(e,"viewBox",l[1])},i(l){i||(h(s,l),i=!0)},o(l){_(s,l),i=!1},d(l){l&&m(e),r&&r.d(),s&&s.d(l)}}}function Ft(t,e,n){let{$$slots:i={},$$scope:r}=e,{title:o=null}=e,{viewBox:s}=e;return t.$$set=l=>{"title"in l&&n(0,o=l.title),"viewBox"in l&&n(1,s=l.viewBox),"$$scope"in l&&n(2,r=l.$$scope)},[o,s,r,i]}class Bt extends O{constructor(e){super(),A(this,e,Ft,Ct,E,{title:0,viewBox:1})}}function xt(t){let e,n,i;return{c(){e=te("path"),n=R(),i=te("path"),c(e,"d","M256 48c-42.9 0-84.2 13-119.2 37.5-34.2 24-60.2 57.2-75.1 96.1L58 192h45.7l1.9-5c8.2-17.8 19.4-33.9 33.5-48 31.2-31.2 72.7-48.4 116.9-48.4s85.7 17.2 116.9 48.4c31.2 31.2 48.4 72.7 48.4 116.9 0 44.1-17.2 85.7-48.4 116.9-31.2 31.2-72.7 48.4-116.9 48.4-44.1 0-85.6-17.2-116.9-48.4-14-14-25.3-30.1-33.5-47.9l-1.9-5H58l3.6 10.4c14.9 38.9 40.9 72.1 75.1 96.1C171.8 451.1 213 464 256 464c114.7 0 208-93.3 208-208S370.7 48 256 48z"),c(i,"d","M48 277.4h189.7l-43.6 44.7L224 352l96-96-96-96-31 29.9 44.7 44.7H48v42.8z")},m(r,o){p(r,e,o),p(r,n,o),p(r,i,o)},p:B,d(r){r&&m(e),r&&m(n),r&&m(i)}}}function Ut(t){let e,n;const i=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[xt]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=ee(r,i[o]);return e=new Bt({props:r}),{c(){T(e.$$.fragment)},m(o,s){k(e,o,s),n=!0},p(o,[s]){const l=s&1?ht(i,[i[0],mt(o[0])]):{};s&2&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(h(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){P(e,o)}}}function Jt(t,e,n){return t.$$set=i=>{n(0,e=ee(ee({},e),Pe(i)))},e=Pe(e),[e]}class Ge extends O{constructor(e){super(),A(this,e,Jt,Ut,E,{})}}const We={apiBase:"https://sns-manager.herokuapp.com"},Xe="sns-manager-tokens-",Qe=localStorage,_e=t=>{const e=Xe+t;return JSON.parse(Qe.getItem(e)||"[]")},Ye=(t,e)=>{const n=e.toLowerCase()==="twitter";if(!t||!t.accessToken||n&&!t.accessSecret){console.log("Invalid token",t);return}const i=Xe+e,r=_e(e);r.findIndex(o=>o.token===t.accessToken)===-1?(r.push({token:t.accessToken,refreshToken:t.refreshToken}),Qe.setItem(i,JSON.stringify(r))):console.warn("User is already logged in. Ignoring")};function Dt(t){let e,n,i,r,o,s;return i=new Ge({}),{c(){e=v("a"),n=v("div"),T(i.$$.fragment),r=R(),o=N(t[0]),c(n,"class","w-4 h-4"),c(e,"href",t[1]()),c(e,"class","flex flex-row items-center font-bold")},m(l,a){p(l,e,a),$(e,n),k(i,n,null),$(e,r),$(e,o),s=!0},p(l,[a]){(!s||a&1)&&ge(o,l[0])},i(l){s||(h(i.$$.fragment,l),s=!0)},o(l){_(i.$$.fragment,l),s=!1},d(l){l&&m(e),P(i)}}}function Mt(t,e,n){let{provider:i}=e;const r=De(),o=i.toLowerCase(),s=()=>window.location.origin+window.location.pathname,l=()=>`${We.apiBase}/api/${o}/auth?return_to=${encodeURIComponent(s())}`;return ie(()=>{const f=new URLSearchParams(window.location.search).get(o);if(f){const b=JSON.parse(f),w=i.toLowerCase()==="twitter"?It(b):Rt(b);Ye(w,i),history.replaceState("","",s())}r("login",{tokens:_e(i)})}),t.$$set=a=>{"provider"in a&&n(0,i=a.provider)},[i,l]}class fe extends O{constructor(e){super(),A(this,e,Mt,Dt,E,{provider:0})}}function zt(t){let e,n,i;return{c(){e=v("input"),c(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),c(e,"type","text"),c(e,"name",t[4]),e.disabled=t[1],e.required=t[2],c(e,"placeholder",t[3])},m(r,o){p(r,e,o),ne(e,t[0]),n||(i=x(e,"input",t[7]),n=!0)},p(r,o){o&16&&c(e,"name",r[4]),o&2&&(e.disabled=r[1]),o&4&&(e.required=r[2]),o&8&&c(e,"placeholder",r[3]),o&1&&e.value!==r[0]&&ne(e,r[0])},d(r){r&&m(e),n=!1,i()}}}function Kt(t){let e,n,i;return{c(){e=v("input"),c(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),c(e,"type","password"),c(e,"name",t[4]),e.disabled=t[1],e.required=t[2],c(e,"placeholder",t[3])},m(r,o){p(r,e,o),ne(e,t[0]),n||(i=x(e,"input",t[6]),n=!0)},p(r,o){o&16&&c(e,"name",r[4]),o&2&&(e.disabled=r[1]),o&4&&(e.required=r[2]),o&8&&c(e,"placeholder",r[3]),o&1&&e.value!==r[0]&&ne(e,r[0])},d(r){r&&m(e),n=!1,i()}}}function Ht(t){let e;function n(o,s){return o[5]?Kt:zt}let i=n(t),r=i(t);return{c(){r.c(),e=pe()},m(o,s){r.m(o,s),p(o,e,s)},p(o,[s]){i===(i=n(o))&&r?r.p(o,s):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:B,o:B,d(o){r.d(o),o&&m(e)}}}function jt(t,e,n){let{value:i}=e,{disabled:r=!1}=e,{required:o=!1}=e,{placeholder:s=""}=e,{name:l=""}=e,{password:a=!1}=e;function f(){i=this.value,n(0,i)}function b(){i=this.value,n(0,i)}return t.$$set=u=>{"value"in u&&n(0,i=u.value),"disabled"in u&&n(1,r=u.disabled),"required"in u&&n(2,o=u.required),"placeholder"in u&&n(3,s=u.placeholder),"name"in u&&n(4,l=u.name),"password"in u&&n(5,a=u.password)},[i,r,o,s,l,a,f,b]}class Ee extends O{constructor(e){super(),A(this,e,jt,Ht,E,{value:0,disabled:1,required:2,placeholder:3,name:4,password:5})}}function Vt(t){let e,n,i,r;const o=t[3].default,s=H(o,t,t[2],null);return{c(){e=v("button"),s&&s.c(),c(e,"class","disabled:text-gray-500 font-semibold border p-2 rounded"),e.disabled=t[0],c(e,"type",t[1])},m(l,a){p(l,e,a),s&&s.m(e,null),n=!0,i||(r=x(e,"click",t[4]),i=!0)},p(l,[a]){s&&s.p&&(!n||a&4)&&V(s,o,l,l[2],n?j(o,l[2],a,null):G(l[2]),null),(!n||a&1)&&(e.disabled=l[0]),(!n||a&2)&&c(e,"type",l[1])},i(l){n||(h(s,l),n=!0)},o(l){_(s,l),n=!1},d(l){l&&m(e),s&&s.d(l),i=!1,r()}}}function Gt(t,e,n){let{$$slots:i={},$$scope:r}=e,{disabled:o=!1}=e,{type:s="button"}=e;function l(a){ut.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"type"in a&&n(1,s=a.type),"$$scope"in a&&n(2,r=a.$$scope)},[o,s,r,i,l]}class Wt extends O{constructor(e){super(),A(this,e,Gt,Vt,E,{disabled:0,type:1})}}function Xt(t){let e;return{c(){e=N("Login")},m(n,i){p(n,e,i)},d(n){n&&m(e)}}}function Qt(t){let e,n,i,r,o,s,l,a,f,b,u,w,S,g,y,I,we,W,be,q,X,J,oe,$e;i=new Ge({});function Ze(d){t[7](d)}let ve={name:"username",disabled:t[3],placeholder:"Username",required:!0};t[0]!==void 0&&(ve.value=t[0]),w=new Ee({props:ve}),re.push(()=>Re(w,"value",Ze));function et(d){t[8](d)}let ye={name:"password",disabled:t[3],placeholder:"Password",required:!0,password:!0};return t[1]!==void 0&&(ye.value=t[1]),y=new Ee({props:ye}),re.push(()=>Re(y,"value",et)),q=new Wt({props:{type:"submit",disabled:t[3],$$slots:{default:[Xt]},$$scope:{ctx:t}}}),{c(){e=v("button"),n=v("div"),T(i.$$.fragment),r=N(`
  Pixiv`),o=R(),s=v("div"),l=v("div"),a=R(),f=v("h2"),f.textContent="Pixiv Login",b=R(),u=v("form"),T(w.$$.fragment),g=R(),T(y.$$.fragment),we=R(),W=v("div"),W.textContent="Login might be slow or fail often.",be=R(),T(q.$$.fragment),c(n,"class","w-4 h-4"),c(e,"class","flex flex-row items-center font-bold"),c(l,"class","fixed inset-0 -z-10"),c(f,"class","font-bold"),c(W,"class","text-xs text-gray-500"),c(u,"class","flex flex-col gap-2 justify-center p-4 z-10"),c(s,"class",X=`${t[2]?"flex":"hidden"} fixed inset-0 items-center justify-center backdrop-blur-sm flex-col`)},m(d,L){p(d,e,L),$(e,n),k(i,n,null),$(e,r),p(d,o,L),p(d,s,L),$(s,l),$(s,a),$(s,f),$(s,b),$(s,u),k(w,u,null),$(u,g),k(y,u,null),$(u,we),$(u,W),$(u,be),k(q,u,null),J=!0,oe||($e=[x(e,"click",t[5]),x(l,"click",t[6]),x(u,"submit",st(t[9]))],oe=!0)},p(d,[L]){const se={};L&8&&(se.disabled=d[3]),!S&&L&1&&(S=!0,se.value=d[0],Te(()=>S=!1)),w.$set(se);const le={};L&8&&(le.disabled=d[3]),!I&&L&2&&(I=!0,le.value=d[1],Te(()=>I=!1)),y.$set(le);const ae={};L&8&&(ae.disabled=d[3]),L&4096&&(ae.$$scope={dirty:L,ctx:d}),q.$set(ae),(!J||L&4&&X!==(X=`${d[2]?"flex":"hidden"} fixed inset-0 items-center justify-center backdrop-blur-sm flex-col`))&&c(s,"class",X)},i(d){J||(h(i.$$.fragment,d),h(w.$$.fragment,d),h(y.$$.fragment,d),h(q.$$.fragment,d),J=!0)},o(d){_(i.$$.fragment,d),_(w.$$.fragment,d),_(y.$$.fragment,d),_(q.$$.fragment,d),J=!1},d(d){d&&m(e),P(i),d&&m(o),d&&m(s),P(w),P(y),P(q),oe=!1,U($e)}}}const Ae="pixiv";function Yt(t,e,n){const i=De();let r="",o="",s=!1,l=!1;const a=async()=>{const y=new qt(new He({basePath:We.apiBase}));n(3,l=!0);try{const I=await y.pixivAuthPost({login:{username:r,password:o}});Ye(I,Ae),f(),n(2,s=!1),n(0,r=""),n(1,o="")}catch(I){console.log("Failed to login to pixiv",I)}finally{n(3,l=!1)}},f=()=>{i("login",{tokens:_e(Ae)})};ie(()=>f());const b=()=>n(2,s=!s),u=()=>n(2,s=!1);function w(y){r=y,n(0,r)}function S(y){o=y,n(1,o)}return[r,o,s,l,a,b,u,w,S,()=>a()]}class Zt extends O{constructor(e){super(),A(this,e,Yt,Qt,E,{})}}function Oe(t,e,n){const i=t.slice();return i[3]=e[n],i}function Ie(t){let e,n,i;return{c(){e=v("a"),c(e,"href",n="https://reddit.com"+t[3].link),c(e,"class","w-1/2 h-50v sm:w-1/4 sm:h-25v lg:w-1/6 lg:h-15v bg-cover"),c(e,"style",i=`background-image: url(${t[3].image})`)},m(r,o){p(r,e,o)},p(r,o){o&1&&n!==(n="https://reddit.com"+r[3].link)&&c(e,"href",n),o&1&&i!==(i=`background-image: url(${r[3].image})`)&&c(e,"style",i)},d(r){r&&m(e)}}}function en(t){let e,n=t[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ie(Oe(t,n,r));return{c(){e=v("div");for(let r=0;r<i.length;r+=1)i[r].c();c(e,"class","flex flex-row flex-wrap w-full")},m(r,o){p(r,e,o);for(let s=0;s<i.length;s+=1)i[s].m(e,null)},p(r,[o]){if(o&1){n=r[0];let s;for(s=0;s<n.length;s+=1){const l=Oe(r,n,s);i[s]?i[s].p(l,o):(i[s]=Ie(l),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},i:B,o:B,d(r){r&&m(e),Ue(i,r)}}}function tn(t,e,n){let{api:i}=e,{username:r}=e,o=[];return ie(async()=>{n(0,o=await i.getUpvoted(r))}),t.$$set=s=>{"api"in s&&n(1,i=s.api),"username"in s&&n(2,r=s.username)},[o,i,r]}class nn extends O{constructor(e){super(),A(this,e,tn,en,E,{api:1,username:2})}}function rn(t){let e,n;const i=t[2].default,r=H(i,t,t[1],null);return{c(){e=v("a"),r&&r.c(),c(e,"href",t[0]),c(e,"class","text-blue-900 hover:underline"),c(e,"target","_blank")},m(o,s){p(o,e,s),r&&r.m(e,null),n=!0},p(o,[s]){r&&r.p&&(!n||s&2)&&V(r,i,o,o[1],n?j(i,o[1],s,null):G(o[1]),null),(!n||s&1)&&c(e,"href",o[0])},i(o){n||(h(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&m(e),r&&r.d(o)}}}function on(t,e,n){let{$$slots:i={},$$scope:r}=e,{url:o}=e;return t.$$set=s=>{"url"in s&&n(0,o=s.url),"$$scope"in s&&n(1,r=s.$$scope)},[o,r,i]}class sn extends O{constructor(e){super(),A(this,e,on,rn,E,{url:0})}}function ln(t){let e,n;const i=t[1].default,r=H(i,t,t[0],null);return{c(){e=v("div"),r&&r.c(),c(e,"class","flex flex-col gap-4 p-4 bg-white rounded-md")},m(o,s){p(o,e,s),r&&r.m(e,null),n=!0},p(o,[s]){r&&r.p&&(!n||s&1)&&V(r,i,o,o[0],n?j(i,o[0],s,null):G(o[0]),null)},i(o){n||(h(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&m(e),r&&r.d(o)}}}function an(t,e,n){let{$$slots:i={},$$scope:r}=e;return t.$$set=o=>{"$$scope"in o&&n(0,r=o.$$scope)},[r,i]}class un extends O{constructor(e){super(),A(this,e,an,ln,E,{})}}const cn="https://oauth.reddit.com";class fn{constructor(e,n="web:social-media-manager:0.0.1 (by /u/illu11)"){C(this,"headers");this.headers={Authorization:`Bearer ${e}`,"User-Agent":n}}async getJson(e){const n=await fetch(cn+e,{headers:this.headers});return[await n.json(),n.status]}async getUser(){const[e,n]=await this.getJson("/api/v1/me");return n!==200?null:{id:e.id,name:e.name}}async getUpvoted(e){const[n,i]=await this.getJson(`/user/${e}/upvoted?sort=new&type=link`);return i!==200?[]:n.data.children.map(o=>o.data).map(o=>({link:o.permalink,image:o.url}))}}const dn=t=>({username:t&1}),Ne=t=>({api:t[1],username:t[0]});function qe(t){let e,n;return e=new un({props:{$$slots:{default:[mn]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(i,r){k(e,i,r),n=!0},p(i,r){const o={};r&17&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(h(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function hn(t){let e,n;return{c(){e=N("Reddit - "),n=N(t[0])},m(i,r){p(i,e,r),p(i,n,r)},p(i,r){r&1&&ge(n,i[0])},d(i){i&&m(e),i&&m(n)}}}function mn(t){let e,n,i;e=new sn({props:{url:`https://reddit.com/u/${t[0]}`,$$slots:{default:[hn]},$$scope:{ctx:t}}});const r=t[3].default,o=H(r,t,t[4],Ne);return{c(){T(e.$$.fragment),n=R(),o&&o.c()},m(s,l){k(e,s,l),p(s,n,l),o&&o.m(s,l),i=!0},p(s,l){const a={};l&1&&(a.url=`https://reddit.com/u/${s[0]}`),l&17&&(a.$$scope={dirty:l,ctx:s}),e.$set(a),o&&o.p&&(!i||l&17)&&V(o,r,s,s[4],i?j(r,s[4],l,dn):G(s[4]),Ne)},i(s){i||(h(e.$$.fragment,s),h(o,s),i=!0)},o(s){_(e.$$.fragment,s),_(o,s),i=!1},d(s){P(e,s),s&&m(n),o&&o.d(s)}}}function pn(t){let e,n,i=t[0]&&qe(t);return{c(){i&&i.c(),e=pe()},m(r,o){i&&i.m(r,o),p(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&h(i,1)):(i=qe(r),i.c(),h(i,1),i.m(e.parentNode,e)):i&&(ze(),_(i,1,1,()=>{i=null}),Ke())},i(r){n||(h(i),n=!0)},o(r){_(i),n=!1},d(r){i&&i.d(r),r&&m(e)}}}function gn(t,e,n){let{$$slots:i={},$$scope:r}=e,{token:o}=e,s;const l=new fn(o.token);return ie(async()=>{const a=await l.getUser();a==null||n(0,s=a.name)}),t.$$set=a=>{"token"in a&&n(2,o=a.token),"$$scope"in a&&n(4,r=a.$$scope)},[s,l,o,i,r]}class _n extends O{constructor(e){super(),A(this,e,gn,pn,E,{token:2})}}function Ce(t,e,n){const i=t.slice();return i[1]=e[n],i}function wn(t){let e,n,i;return e=new nn({props:{api:t[4],username:t[5]}}),{c(){T(e.$$.fragment),n=R()},m(r,o){k(e,r,o),p(r,n,o),i=!0},p(r,o){const s={};o&16&&(s.api=r[4]),o&32&&(s.username=r[5]),e.$set(s)},i(r){i||(h(e.$$.fragment,r),i=!0)},o(r){_(e.$$.fragment,r),i=!1},d(r){P(e,r),r&&m(n)}}}function Fe(t){let e,n;return e=new _n({props:{token:t[1],$$slots:{default:[wn,({api:i,username:r})=>({4:i,5:r}),({api:i,username:r})=>(i?16:0)|(r?32:0)]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(i,r){k(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.token=i[1]),r&112&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(h(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function bn(t){let e,n,i=t[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=Fe(Ce(t,i,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=v("div");for(let s=0;s<r.length;s+=1)r[s].c();c(e,"class","flex flex-col")},m(s,l){p(s,e,l);for(let a=0;a<r.length;a+=1)r[a].m(e,null);n=!0},p(s,[l]){if(l&49){i=s[0];let a;for(a=0;a<i.length;a+=1){const f=Ce(s,i,a);r[a]?(r[a].p(f,l),h(r[a],1)):(r[a]=Fe(f),r[a].c(),h(r[a],1),r[a].m(e,null))}for(ze(),a=i.length;a<r.length;a+=1)o(a);Ke()}},i(s){if(!n){for(let l=0;l<i.length;l+=1)h(r[l]);n=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)_(r[l]);n=!1},d(s){s&&m(e),Ue(r,s)}}}function $n(t,e,n){let{redditLogins:i=[]}=e;return t.$$set=r=>{"redditLogins"in r&&n(0,i=r.redditLogins)},[i]}class vn extends O{constructor(e){super(),A(this,e,$n,bn,E,{redditLogins:0})}}function yn(t){let e,n,i,r,o,s,l,a,f,b,u,w,S;return i=new fe({props:{provider:"Twitter"}}),i.$on("login",t[4]),o=new fe({props:{provider:"Reddit"}}),o.$on("login",t[5]),l=new fe({props:{provider:"Pinterest"}}),l.$on("login",t[6]),f=new Zt({}),f.$on("login",t[7]),w=new vn({props:{redditLogins:t[1]}}),{c(){e=v("div"),n=v("header"),T(i.$$.fragment),r=R(),T(o.$$.fragment),s=R(),T(l.$$.fragment),a=R(),T(f.$$.fragment),b=R(),u=v("main"),T(w.$$.fragment),c(n,"class","flex flex-row justify-center gap-4 border-b p-2"),c(u,"class","p-4"),c(e,"class","h-full flex flex-col")},m(g,y){p(g,e,y),$(e,n),k(i,n,null),$(n,r),k(o,n,null),$(n,s),k(l,n,null),$(n,a),k(f,n,null),$(e,b),$(e,u),k(w,u,null),S=!0},p(g,[y]){const I={};y&2&&(I.redditLogins=g[1]),w.$set(I)},i(g){S||(h(i.$$.fragment,g),h(o.$$.fragment,g),h(l.$$.fragment,g),h(f.$$.fragment,g),h(w.$$.fragment,g),S=!0)},o(g){_(i.$$.fragment,g),_(o.$$.fragment,g),_(l.$$.fragment,g),_(f.$$.fragment,g),_(w.$$.fragment,g),S=!1},d(g){g&&m(e),P(i),P(o),P(l),P(f),P(w)}}}function kn(t,e,n){let i=[],r=[],o=[],s=[];return console.log("%c THIS IS A WARNING ","color: #bc3939; font-size: 16px"),console.log("%c Be careful when executing something in here. It's possible to get your account information","color: #bc3939; font-size: 14px"),[i,r,o,s,u=>n(0,i=u.detail.tokens),u=>n(1,r=u.detail.tokens),u=>n(3,s=u.detail.tokens),u=>n(2,o=u.detail.tokens)]}class Pn extends O{constructor(e){super(),A(this,e,kn,yn,E,{})}}new Pn({target:document.getElementById("app")});
