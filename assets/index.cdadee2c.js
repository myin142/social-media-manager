var bt=Object.defineProperty;var yt=(t,e,n)=>e in t?bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>(yt(t,typeof e!="symbol"?e+"":e,n),n);const vt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};vt();function V(){}function ke(t,e){for(const n in e)t[n]=e[n];return t}function rt(t){return t()}function Je(){return Object.create(null)}function Z(t){t.forEach(rt)}function Tt(t){return typeof t=="function"}function H(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let pe;function xe(t,e){return pe||(pe=document.createElement("a")),pe.href=e,t===pe.href}function Rt(t){return Object.keys(t).length===0}function Ce(t,e,n,r){if(t){const i=it(t,e,n,r);return t[0](i)}}function it(t,e,n,r){return t[1]&&r?ke(n.ctx.slice(),t[1](r(e))):n.ctx}function Fe(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],a=Math.max(e.dirty.length,i.length);for(let o=0;o<a;o+=1)s[o]=e.dirty[o]|i[o];return s}return e.dirty|i}return e.dirty}function Ge(t,e,n,r,i,s){if(i){const a=it(e,n,r,s);t.p(a,i)}}function Ne(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function ze(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function _(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode.removeChild(t)}function st(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function be(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ee(t){return document.createTextNode(t)}function L(){return ee(" ")}function ye(){return ee("")}function M(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Pt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function St(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function It(t){return Array.from(t.childNodes)}function ve(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function se(t,e){t.value=e==null?"":e}function $t(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ot(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}let le;function ae(t){le=t}function ot(){if(!le)throw new Error("Function called outside component initialization");return le}function ue(t){ot().$$.on_mount.push(t)}function te(){const t=ot();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=Ot(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,s)}),!s.defaultPrevented}return!0}}function at(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const oe=[],ce=[],we=[],$e=[],At=Promise.resolve();let Oe=!1;function Et(){Oe||(Oe=!0,At.then(lt))}function Ae(t){we.push(t)}function Me(t){$e.push(t)}const Pe=new Set;let ge=0;function lt(){const t=le;do{for(;ge<oe.length;){const e=oe[ge];ge++,ae(e),Ut(e.$$)}for(ae(null),oe.length=0,ge=0;ce.length;)ce.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];Pe.has(n)||(Pe.add(n),n())}we.length=0}while(oe.length);for(;$e.length;)$e.pop()();Oe=!1,Pe.clear(),ae(t)}function Ut(t){if(t.fragment!==null){t.update(),Z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ae)}}const _e=new Set;let ne;function fe(){ne={r:0,c:[],p:ne}}function de(){ne.r||Z(ne.c),ne=ne.p}function S(t,e){t&&t.i&&(_e.delete(t),t.i(e))}function A(t,e,n,r){if(t&&t.o){if(_e.has(t))return;_e.add(t),ne.c.push(()=>{_e.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ct(t,e){A(t,1,1,()=>{e.delete(t.key)})}function Ft(t,e,n,r,i,s,a,o,l,u,c,d){let h=t.length,R=s.length,y=h;const N={};for(;y--;)N[t[y].key]=y;const E=[],G=new Map,x=new Map;for(y=R;y--;){const P=d(i,s,y),T=n(P);let C=a.get(T);C?r&&C.p(P,e):(C=u(T,P),C.c()),G.set(T,E[y]=C),T in N&&x.set(T,Math.abs(y-N[T]))}const v=new Set,U=new Set;function k(P){S(P,1),P.m(o,c),a.set(P.key,P),c=P.first,R--}for(;h&&R;){const P=E[R-1],T=t[h-1],C=P.key,D=T.key;P===T?(c=P.first,h--,R--):G.has(D)?!a.has(C)||v.has(C)?k(P):U.has(D)?h--:x.get(C)>x.get(D)?(U.add(C),k(P)):(v.add(D),h--):(l(T,a),h--)}for(;h--;){const P=t[h];G.has(P.key)||l(P,a)}for(;R;)k(E[R-1]);return E}function Gt(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const a=t[s],o=e[s];if(o){for(const l in a)l in o||(r[l]=1);for(const l in o)i[l]||(n[l]=o[l],i[l]=1);t[s]=o}else for(const l in a)i[l]=1}for(const a in r)a in n||(n[a]=void 0);return n}function Nt(t){return typeof t=="object"&&t!==null?t:{}}function Ke(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function z(t){t&&t.c()}function B(t,e,n,r){const{fragment:i,on_mount:s,on_destroy:a,after_update:o}=t.$$;i&&i.m(e,n),r||Ae(()=>{const l=s.map(rt).filter(Tt);a?a.push(...l):Z(l),t.$$.on_mount=[]}),o.forEach(Ae)}function J(t,e){const n=t.$$;n.fragment!==null&&(Z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(t,e){t.$$.dirty[0]===-1&&(oe.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,r,i,s,a,o=[-1]){const l=le;ae(t);const u=t.$$={fragment:null,ctx:null,props:s,update:V,not_equal:i,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Je(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(d,h,...R)=>{const y=R.length?R[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=y)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](y),c&&Lt(t,d)),h}):[],u.update(),c=!0,Z(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const d=It(e.target);u.fragment&&u.fragment.l(d),d.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&S(t.$$.fragment),B(t,e.target,e.anchor,e.customElement),lt()}ae(l)}class X{$destroy(){J(this,1),this.$destroy=V}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ve(t){let e,n;return{c(){e=be("title"),n=ee(t[0])},m(r,i){$(r,e,i),_(e,n)},p(r,i){i&1&&ve(n,r[0])},d(r){r&&I(e)}}}function qt(t){let e,n,r,i=t[0]&&Ve(t);const s=t[3].default,a=Ce(s,t,t[2],null);return{c(){e=be("svg"),i&&i.c(),n=ye(),a&&a.c(),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox",t[1]),f(e,"class","svelte-c8tyih")},m(o,l){$(o,e,l),i&&i.m(e,null),_(e,n),a&&a.m(e,null),r=!0},p(o,[l]){o[0]?i?i.p(o,l):(i=Ve(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),a&&a.p&&(!r||l&4)&&Ge(a,s,o,o[2],r?Fe(s,o[2],l,null):Ne(o[2]),null),(!r||l&2)&&f(e,"viewBox",o[1])},i(o){r||(S(a,o),r=!0)},o(o){A(a,o),r=!1},d(o){o&&I(e),i&&i.d(),a&&a.d(o)}}}function Dt(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:s=null}=e,{viewBox:a}=e;return t.$$set=o=>{"title"in o&&n(0,s=o.title),"viewBox"in o&&n(1,a=o.viewBox),"$$scope"in o&&n(2,i=o.$$scope)},[s,a,i,r]}class Bt extends X{constructor(e){super(),W(this,e,Dt,qt,H,{title:0,viewBox:1})}}function Jt(t){let e,n,r;return{c(){e=be("path"),n=L(),r=be("path"),f(e,"d","M256 48c-42.9 0-84.2 13-119.2 37.5-34.2 24-60.2 57.2-75.1 96.1L58 192h45.7l1.9-5c8.2-17.8 19.4-33.9 33.5-48 31.2-31.2 72.7-48.4 116.9-48.4s85.7 17.2 116.9 48.4c31.2 31.2 48.4 72.7 48.4 116.9 0 44.1-17.2 85.7-48.4 116.9-31.2 31.2-72.7 48.4-116.9 48.4-44.1 0-85.6-17.2-116.9-48.4-14-14-25.3-30.1-33.5-47.9l-1.9-5H58l3.6 10.4c14.9 38.9 40.9 72.1 75.1 96.1C171.8 451.1 213 464 256 464c114.7 0 208-93.3 208-208S370.7 48 256 48z"),f(r,"d","M48 277.4h189.7l-43.6 44.7L224 352l96-96-96-96-31 29.9 44.7 44.7H48v42.8z")},m(i,s){$(i,e,s),$(i,n,s),$(i,r,s)},p:V,d(i){i&&I(e),i&&I(n),i&&I(r)}}}function xt(t){let e,n;const r=[{viewBox:"0 0 512 512"},t[0]];let i={$$slots:{default:[Jt]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)i=ke(i,r[s]);return e=new Bt({props:i}),{c(){z(e.$$.fragment)},m(s,a){B(e,s,a),n=!0},p(s,[a]){const o=a&1?Gt(r,[r[0],Nt(s[0])]):{};a&2&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(S(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){J(e,s)}}}function zt(t,e,n){return t.$$set=r=>{n(0,e=ke(ke({},e),ze(r)))},e=ze(e),[e]}class ut extends X{constructor(e){super(),W(this,e,zt,xt,H,{})}}const he={apiBase:"http://localhost:8080"},Mt="http://localhost".replace(/\/+$/,"");class Te{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:Mt}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||ct}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const Kt=new Te;class Le{constructor(e=Kt){j(this,"middleware");j(this,"fetchApi",async(e,n)=>{let r={url:e,init:n};for(const s of this.middleware)s.pre&&(r=await s.pre({fetch:this.fetchApi,...r})||r);let i;try{i=await(this.configuration.fetchApi||fetch)(r.url,r.init)}catch(s){for(const a of this.middleware)a.onError&&(i=await a.onError({fetch:this.fetchApi,url:r.url,init:r.init,error:s,response:i?i.clone():void 0})||i);if(i!==void 0)throw new Xt(s,"The request failed and the interceptors did not return an alternative response")}for(const s of this.middleware)s.post&&(i=await s.post({fetch:this.fetchApi,url:r.url,init:r.init,response:i.clone()})||i);return i});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const n=this.clone();return n.middleware=n.middleware.concat(...e),n}withPreMiddleware(...e){const n=e.map(r=>({pre:r}));return this.withMiddleware(...n)}withPostMiddleware(...e){const n=e.map(r=>({post:r}));return this.withMiddleware(...n)}async request(e,n){const{url:r,init:i}=await this.createFetchParams(e,n),s=await this.fetchApi(r,i);if(s.status>=200&&s.status<300)return s;throw new Wt(s,"Response returned an error code")}async createFetchParams(e,n){let r=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(r+="?"+this.configuration.queryParamsStringify(e.query));const i=Object.assign({},this.configuration.headers,e.headers);Object.keys(i).forEach(u=>i[u]===void 0?delete i[u]:{});const s=typeof n=="function"?n:async()=>n,a={method:e.method,headers:i,body:e.body,credentials:this.configuration.credentials},o={...a,...await s({init:a,context:e})},l={...o,body:Ht(o.body)||o.body instanceof URLSearchParams||Vt(o.body)?o.body:JSON.stringify(o.body)};return{url:r,init:l}}clone(){const e=this.constructor,n=new e(this.configuration);return n.middleware=this.middleware.slice(),n}}function Vt(t){return typeof Blob!="undefined"&&t instanceof Blob}function Ht(t){return typeof FormData!="undefined"&&t instanceof FormData}class Wt extends Error{constructor(n,r){super(r);j(this,"name","ResponseError");this.response=n}}class Xt extends Error{constructor(n,r){super(r);j(this,"name","FetchError");this.cause=n}}class K extends Error{constructor(n,r){super(r);j(this,"name","RequiredError");this.field=n}}function Qt(t,e){const n=t[e];return n!=null}function ct(t,e=""){return Object.keys(t).map(n=>ft(n,t[n],e)).filter(n=>n.length>0).join("&")}function ft(t,e,n=""){const r=n+(n.length?`[${t}]`:t);if(e instanceof Array){const i=e.map(s=>encodeURIComponent(String(s))).join(`&${encodeURIComponent(r)}=`);return`${encodeURIComponent(r)}=${i}`}if(e instanceof Set){const i=Array.from(e);return ft(t,i,n)}return e instanceof Date?`${encodeURIComponent(r)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?ct(e,r):`${encodeURIComponent(r)}=${encodeURIComponent(String(e))}`}function qe(t){for(const e of t)if(e.contentType==="multipart/form-data")return!0;return!1}class Q{constructor(e,n=r=>r){this.raw=e,this.transformer=n}async value(){return this.transformer(await this.raw.json())}}class me{constructor(e){this.raw=e}async value(){}}function Yt(t){if(t!==void 0)return t===null?null:{password:t.password,username:t.username}}function Ee(t){return Zt(t)}function Zt(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}function Ue(t){return jt(t)}function jt(t,e){return t==null?t:{accessToken:t.access_token,expiresIn:t.expires_in,name:t.name,refreshToken:t.refresh_token,userId:t.user_id,username:t.username}}function en(t){return tn(t)}function tn(t,e){return t==null?t:{image:t.image,link:t.link}}function dt(t){if(t!==void 0)return t===null?null:{refresh_token:t.refreshToken}}function De(t){return nn(t)}function nn(t,e){return t==null?t:{url:Qt(t,"url")?t.url:void 0}}function rn(t){if(t!==void 0)return t===null?null:{token:t.token}}function sn(t){return on(t)}function on(t,e){return t==null?t:{link:t.link,mediaUrl:t.media_url,tweetId:t.tweet_id}}function an(t){return ln(t)}function ln(t,e){return t==null?t:{images:t.images.map(sn)}}function ht(t){return un(t)}function un(t,e){return t==null?t:{accessSecret:t.access_secret,accessToken:t.access_token}}function cn(t){return fn(t)}function fn(t,e){return t==null?t:{images:t.images.map(en)}}function mt(t){return dn(t)}function dn(t,e){return t==null?t:{id:t.id,name:t.name}}class hn extends Le{async bookmarksBookmarksGetRaw(e,n){if(e.userId===null||e.userId===void 0)throw new K("userId","Required parameter requestParameters.userId was null or undefined when calling bookmarksBookmarksGet.");const r={};e.userId!==void 0&&(r.user_id=e.userId);const i={};if(this.configuration&&this.configuration.accessToken){const a=this.configuration.accessToken,o=await a("jwt",[]);o&&(i.Authorization=`Bearer ${o}`)}const s=await this.request({path:"/api/pixiv/bookmarks",method:"GET",headers:i,query:r},n);return new me(s)}async bookmarksBookmarksGet(e,n){await this.bookmarksBookmarksGetRaw(e,n)}async pingPingGetRaw(e){const n={},r={};if(this.configuration&&this.configuration.accessToken){const s=this.configuration.accessToken,a=await s("jwt",[]);a&&(r.Authorization=`Bearer ${a}`)}const i=await this.request({path:"/api/pixiv/ping",method:"GET",headers:r,query:n},e);return new me(i)}async pingPingGet(e){await this.pingPingGetRaw(e)}async pixivAuthPostRaw(e,n){if(e.login===null||e.login===void 0)throw new K("login","Required parameter requestParameters.login was null or undefined when calling pixivAuthPost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/pixiv/auth/",method:"POST",headers:i,query:r,body:Yt(e.login)},n);return new Q(s,a=>Ue(a))}async pixivAuthPost(e,n){return await(await this.pixivAuthPostRaw(e,n)).value()}async pixivPostPostPostRaw(e,n){if(e.images===null||e.images===void 0)throw new K("images","Required parameter requestParameters.images was null or undefined when calling pixivPostPostPost.");if(e.tags===null||e.tags===void 0)throw new K("tags","Required parameter requestParameters.tags was null or undefined when calling pixivPostPostPost.");if(e.title===null||e.title===void 0)throw new K("title","Required parameter requestParameters.title was null or undefined when calling pixivPostPostPost.");const r={},i={};if(this.configuration&&this.configuration.accessToken){const c=this.configuration.accessToken,d=await c("jwt",[]);d&&(i.Authorization=`Bearer ${d}`)}const a=qe([{contentType:"multipart/form-data"}]);let o,l=!1;l=a,l?o=new FormData:o=new URLSearchParams,e.images&&e.images.forEach(c=>{o.append("images",c)}),e.tags!==void 0&&o.append("tags",e.tags),e.text!==void 0&&o.append("text",e.text),e.title!==void 0&&o.append("title",e.title);const u=await this.request({path:"/api/pixiv/post",method:"POST",headers:i,query:r,body:o},n);return new Q(u,c=>De(c))}async pixivPostPostPost(e,n){return await(await this.pixivPostPostPostRaw(e,n)).value()}async pixivRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new K("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling pixivRefreshRefreshPost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/pixiv/auth/refresh",method:"POST",headers:i,query:r,body:dt(e.refreshToken)},n);return new Q(s,a=>Ue(a))}async pixivRefreshRefreshPost(e,n){return await(await this.pixivRefreshRefreshPostRaw(e,n)).value()}}class mn extends Le{async redditAuthCallbackCallbackGetRaw(e){const n={},r={},i=await this.request({path:"/api/reddit/auth/callback",method:"GET",headers:r,query:n},e);return new Q(i,s=>Ee(s))}async redditAuthCallbackCallbackGet(e){return await(await this.redditAuthCallbackCallbackGetRaw(e)).value()}async redditAuthGetRaw(e,n){const r={};e.returnTo!==void 0&&(r.return_to=e.returnTo);const i={},s=await this.request({path:"/api/reddit/auth/",method:"GET",headers:i,query:r},n);return new me(s)}async redditAuthGet(e={},n){await this.redditAuthGetRaw(e,n)}async redditPostPostPostRaw(e,n){if(e.subreddit===null||e.subreddit===void 0)throw new K("subreddit","Required parameter requestParameters.subreddit was null or undefined when calling redditPostPostPost.");if(e.title===null||e.title===void 0)throw new K("title","Required parameter requestParameters.title was null or undefined when calling redditPostPostPost.");const r={},i={};if(this.configuration&&this.configuration.accessToken){const c=this.configuration.accessToken,d=await c("jwt",[]);d&&(i.Authorization=`Bearer ${d}`)}const a=qe([{contentType:"multipart/form-data"}]);let o,l=!1;l=a,l?o=new FormData:o=new URLSearchParams,e.flair!==void 0&&o.append("flair",e.flair),e.images&&e.images.forEach(c=>{o.append("images",c)}),e.subreddit!==void 0&&o.append("subreddit",e.subreddit),e.text!==void 0&&o.append("text",e.text),e.title!==void 0&&o.append("title",e.title);const u=await this.request({path:"/api/reddit/post",method:"POST",headers:i,query:r,body:o},n);return new Q(u,c=>De(c))}async redditPostPostPost(e,n){return await(await this.redditPostPostPostRaw(e,n)).value()}async redditRefreshRefreshPostRaw(e,n){if(e.refreshToken===null||e.refreshToken===void 0)throw new K("refreshToken","Required parameter requestParameters.refreshToken was null or undefined when calling redditRefreshRefreshPost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/reddit/auth/refresh",method:"POST",headers:i,query:r,body:dt(e.refreshToken)},n);return new Q(s,a=>Ee(a))}async redditRefreshRefreshPost(e,n){return await(await this.redditRefreshRefreshPostRaw(e,n)).value()}async redditRevokeRevokePostRaw(e,n){if(e.token===null||e.token===void 0)throw new K("token","Required parameter requestParameters.token was null or undefined when calling redditRevokeRevokePost.");const r={},i={};i["Content-Type"]="application/json";const s=await this.request({path:"/api/reddit/auth/revoke",method:"POST",headers:i,query:r,body:rn(e.token)},n);return new me(s)}async redditRevokeRevokePost(e,n){await this.redditRevokeRevokePostRaw(e,n)}async upvotedUpvotedUsernameGetRaw(e,n){if(e.username===null||e.username===void 0)throw new K("username","Required parameter requestParameters.username was null or undefined when calling upvotedUpvotedUsernameGet.");const r={},i={};if(this.configuration&&this.configuration.accessToken){const a=this.configuration.accessToken,o=await a("jwt",[]);o&&(i.Authorization=`Bearer ${o}`)}const s=await this.request({path:"/api/reddit/upvoted/{username}".replace("{username}",encodeURIComponent(String(e.username))),method:"GET",headers:i,query:r},n);return new Q(s,a=>cn(a))}async upvotedUpvotedUsernameGet(e,n){return await(await this.upvotedUpvotedUsernameGetRaw(e,n)).value()}async userUserGetRaw(e){const n={},r={};if(this.configuration&&this.configuration.accessToken){const s=this.configuration.accessToken,a=await s("jwt",[]);a&&(r.Authorization=`Bearer ${a}`)}const i=await this.request({path:"/api/reddit/user",method:"GET",headers:r,query:n},e);return new Q(i,s=>mt(s))}async userUserGet(e){return await(await this.userUserGetRaw(e)).value()}}class pn extends Le{async listTweetsTweetsUsernameGetRaw(e,n){if(e.username===null||e.username===void 0)throw new K("username","Required parameter requestParameters.username was null or undefined when calling listTweetsTweetsUsernameGet.");const r={};e.sinceId!==void 0&&(r.since_id=e.sinceId),e.maxId!==void 0&&(r.max_id=e.maxId),e.count!==void 0&&(r.count=e.count);const i={};this.configuration&&(this.configuration.username!==void 0||this.configuration.password!==void 0)&&(i.Authorization="Basic "+btoa(this.configuration.username+":"+this.configuration.password));const s=await this.request({path:"/api/twitter/tweets/{username}".replace("{username}",encodeURIComponent(String(e.username))),method:"GET",headers:i,query:r},n);return new Q(s,a=>an(a))}async listTweetsTweetsUsernameGet(e,n){return await(await this.listTweetsTweetsUsernameGetRaw(e,n)).value()}async twitterAuthCallbackCallbackGetRaw(e,n){if(e.oauthVerifier===null||e.oauthVerifier===void 0)throw new K("oauthVerifier","Required parameter requestParameters.oauthVerifier was null or undefined when calling twitterAuthCallbackCallbackGet.");if(e.oauthToken===null||e.oauthToken===void 0)throw new K("oauthToken","Required parameter requestParameters.oauthToken was null or undefined when calling twitterAuthCallbackCallbackGet.");const r={};e.oauthVerifier!==void 0&&(r.oauth_verifier=e.oauthVerifier),e.oauthToken!==void 0&&(r.oauth_token=e.oauthToken);const i={},s=await this.request({path:"/api/twitter/auth/callback",method:"GET",headers:i,query:r},n);return new Q(s,a=>ht(a))}async twitterAuthCallbackCallbackGet(e,n){return await(await this.twitterAuthCallbackCallbackGetRaw(e,n)).value()}async twitterAuthGetRaw(e,n){const r={};e.returnTo!==void 0&&(r.return_to=e.returnTo);const i={},s=await this.request({path:"/api/twitter/auth/",method:"GET",headers:i,query:r},n);return new me(s)}async twitterAuthGet(e={},n){await this.twitterAuthGetRaw(e,n)}async twitterPostPostPostRaw(e,n){if(e.text===null||e.text===void 0)throw new K("text","Required parameter requestParameters.text was null or undefined when calling twitterPostPostPost.");const r={},i={};this.configuration&&(this.configuration.username!==void 0||this.configuration.password!==void 0)&&(i.Authorization="Basic "+btoa(this.configuration.username+":"+this.configuration.password));const a=qe([{contentType:"multipart/form-data"}]);let o,l=!1;l=a,l?o=new FormData:o=new URLSearchParams,e.images&&e.images.forEach(c=>{o.append("images",c)}),e.text!==void 0&&o.append("text",e.text);const u=await this.request({path:"/api/twitter/post",method:"POST",headers:i,query:r,body:o},n);return new Q(u,c=>De(c))}async twitterPostPostPost(e,n){return await(await this.twitterPostPostPostRaw(e,n)).value()}async userUserGetRaw(e){const n={},r={};this.configuration&&(this.configuration.username!==void 0||this.configuration.password!==void 0)&&(r.Authorization="Basic "+btoa(this.configuration.username+":"+this.configuration.password));const i=await this.request({path:"/api/twitter/user",method:"GET",headers:r,query:n},e);return new Q(i,s=>mt(s))}async userUserGet(e){return await(await this.userUserGetRaw(e)).value()}}const gn="sns-manager-tokens-",pt=localStorage,gt=t=>gn+t,re=t=>{const e=gt(t);return JSON.parse(pt.getItem(e)||"[]")},wt=(t,e)=>{const n=re(e);if(n.findIndex(r=>r.token===t.accessToken)===-1){const r=_t(t,e);r?(n.push(r),Be(n,e)):console.log("Invalid token",t)}else console.warn("User is already logged in. Ignoring")},_t=(t,e)=>{const n=e==="twitter",r=e==="pixiv",i=!!t.accessToken,s=n?ht(t):r?i?t:Ue(t):Ee(t);return!s||!s.accessToken||n&&!s.accessSecret?null:{token:s.accessToken,secret:s.accessSecret,refreshToken:s.refreshToken,userId:s.userId,username:s.username}},wn=(t,e,n)=>{const r=re(n),i=r.findIndex(a=>a.token===t.token),s=_t(e,n);return s?(r[i]=s,Be(r,n),s):(console.log("Invalid token",e),null)},_n=(t,e)=>{const r=re(e).filter(i=>i.token!==t.token);Be(r,e)},Be=(t,e)=>{const n=gt(e);pt.setItem(n,JSON.stringify(t))};function kn(t){let e,n,r,i,s,a;return r=new ut({}),{c(){e=b("a"),n=b("div"),z(r.$$.fragment),i=L(),s=ee(t[0]),f(n,"class","w-4 h-4"),f(e,"href",t[1]()),f(e,"class","flex flex-row items-center font-bold")},m(o,l){$(o,e,l),_(e,n),B(r,n,null),_(e,i),_(e,s),a=!0},p(o,[l]){(!a||l&1)&&ve(s,o[0])},i(o){a||(S(r.$$.fragment,o),a=!0)},o(o){A(r.$$.fragment,o),a=!1},d(o){o&&I(e),J(r)}}}function bn(t,e,n){let{provider:r}=e;const i=te(),s=()=>window.location.origin+window.location.pathname,a=()=>`${he.apiBase}/api/${r}/auth?return_to=${encodeURIComponent(s())}`;return ue(()=>{const l=new URLSearchParams(window.location.search).get(r);if(l){const u=JSON.parse(l);wt(u,r),history.replaceState("","",s()),i("login")}}),t.$$set=o=>{"provider"in o&&n(0,r=o.provider)},[r,a]}class Se extends X{constructor(e){super(),W(this,e,bn,kn,H,{provider:0})}}function yn(t){let e,n,r;return{c(){e=b("input"),f(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),f(e,"type","text"),f(e,"name",t[4]),e.disabled=t[1],e.required=t[2],f(e,"placeholder",t[3])},m(i,s){$(i,e,s),se(e,t[0]),n||(r=M(e,"input",t[7]),n=!0)},p(i,s){s&16&&f(e,"name",i[4]),s&2&&(e.disabled=i[1]),s&4&&(e.required=i[2]),s&8&&f(e,"placeholder",i[3]),s&1&&e.value!==i[0]&&se(e,i[0])},d(i){i&&I(e),n=!1,r()}}}function vn(t){let e,n,r;return{c(){e=b("input"),f(e,"class","bg-white border py-1 px-2 disabled:bg-gray-200"),f(e,"type","password"),f(e,"name",t[4]),e.disabled=t[1],e.required=t[2],f(e,"placeholder",t[3])},m(i,s){$(i,e,s),se(e,t[0]),n||(r=M(e,"input",t[6]),n=!0)},p(i,s){s&16&&f(e,"name",i[4]),s&2&&(e.disabled=i[1]),s&4&&(e.required=i[2]),s&8&&f(e,"placeholder",i[3]),s&1&&e.value!==i[0]&&se(e,i[0])},d(i){i&&I(e),n=!1,r()}}}function Tn(t){let e;function n(s,a){return s[5]?vn:yn}let r=n(t),i=r(t);return{c(){i.c(),e=ye()},m(s,a){i.m(s,a),$(s,e,a)},p(s,[a]){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:V,o:V,d(s){i.d(s),s&&I(e)}}}function Rn(t,e,n){let{value:r}=e,{disabled:i=!1}=e,{required:s=!1}=e,{placeholder:a=""}=e,{name:o=""}=e,{password:l=!1}=e;function u(){r=this.value,n(0,r)}function c(){r=this.value,n(0,r)}return t.$$set=d=>{"value"in d&&n(0,r=d.value),"disabled"in d&&n(1,i=d.disabled),"required"in d&&n(2,s=d.required),"placeholder"in d&&n(3,a=d.placeholder),"name"in d&&n(4,o=d.name),"password"in d&&n(5,l=d.password)},[r,i,s,a,o,l,u,c]}class He extends X{constructor(e){super(),W(this,e,Rn,Tn,H,{value:0,disabled:1,required:2,placeholder:3,name:4,password:5})}}function Pn(t){let e,n,r,i;const s=t[3].default,a=Ce(s,t,t[2],null);return{c(){e=b("button"),a&&a.c(),f(e,"class","disabled:text-gray-500 font-semibold border p-2 rounded"),e.disabled=t[0],f(e,"type",t[1])},m(o,l){$(o,e,l),a&&a.m(e,null),n=!0,r||(i=M(e,"click",t[4]),r=!0)},p(o,[l]){a&&a.p&&(!n||l&4)&&Ge(a,s,o,o[2],n?Fe(s,o[2],l,null):Ne(o[2]),null),(!n||l&1)&&(e.disabled=o[0]),(!n||l&2)&&f(e,"type",o[1])},i(o){n||(S(a,o),n=!0)},o(o){A(a,o),n=!1},d(o){o&&I(e),a&&a.d(o),r=!1,i()}}}function Sn(t,e,n){let{$$slots:r={},$$scope:i}=e,{disabled:s=!1}=e,{type:a="button"}=e;function o(l){at.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,s=l.disabled),"type"in l&&n(1,a=l.type),"$$scope"in l&&n(2,i=l.$$scope)},[s,a,i,r,o]}class In extends X{constructor(e){super(),W(this,e,Sn,Pn,H,{disabled:0,type:1})}}function $n(t){let e;return{c(){e=ee("Login")},m(n,r){$(n,e,r)},d(n){n&&I(e)}}}function On(t){let e,n,r,i,s,a,o,l,u,c,d,h,R,y,N,E,G,x,v,U,k,P,T,C,D;r=new ut({});function F(p){t[7](p)}let w={name:"username",disabled:t[3],placeholder:"Username",required:!0};t[0]!==void 0&&(w.value=t[0]),R=new He({props:w}),ce.push(()=>Ke(R,"value",F));function g(p){t[8](p)}let m={name:"password",disabled:t[3],placeholder:"Password",required:!0,password:!0};return t[1]!==void 0&&(m.value=t[1]),E=new He({props:m}),ce.push(()=>Ke(E,"value",g)),k=new In({props:{type:"submit",disabled:t[3],$$slots:{default:[$n]},$$scope:{ctx:t}}}),{c(){e=b("button"),n=b("div"),z(r.$$.fragment),i=ee(`
  Pixiv`),s=L(),a=b("div"),o=b("div"),l=L(),u=b("div"),c=b("h2"),c.textContent="Pixiv Login",d=L(),h=b("form"),z(R.$$.fragment),N=L(),z(E.$$.fragment),x=L(),v=b("div"),v.textContent="Login might be slow or fail often.",U=L(),z(k.$$.fragment),f(n,"class","w-4 h-4"),f(e,"class","flex flex-row items-center font-bold"),f(o,"class","fixed inset-0 -z-10"),f(c,"class","font-bold"),f(v,"class","text-xs text-gray-500"),f(h,"class","flex flex-col gap-2 justify-center z-10"),f(u,"class","bg-white flex flex-col justify-center items-center p-4 gap-2"),f(a,"class",P=`${t[2]?"flex":"hidden"} fixed justify-center items-center inset-0 backdrop-blur-sm `)},m(p,O){$(p,e,O),_(e,n),B(r,n,null),_(e,i),$(p,s,O),$(p,a,O),_(a,o),_(a,l),_(a,u),_(u,c),_(u,d),_(u,h),B(R,h,null),_(h,N),B(E,h,null),_(h,x),_(h,v),_(h,U),B(k,h,null),T=!0,C||(D=[M(e,"click",t[5]),M(o,"click",t[6]),M(h,"submit",Pt(t[9]))],C=!0)},p(p,[O]){const q={};O&8&&(q.disabled=p[3]),!y&&O&1&&(y=!0,q.value=p[0],Me(()=>y=!1)),R.$set(q);const ie={};O&8&&(ie.disabled=p[3]),!G&&O&2&&(G=!0,ie.value=p[1],Me(()=>G=!1)),E.$set(ie);const Re={};O&8&&(Re.disabled=p[3]),O&2048&&(Re.$$scope={dirty:O,ctx:p}),k.$set(Re),(!T||O&4&&P!==(P=`${p[2]?"flex":"hidden"} fixed justify-center items-center inset-0 backdrop-blur-sm `))&&f(a,"class",P)},i(p){T||(S(r.$$.fragment,p),S(R.$$.fragment,p),S(E.$$.fragment,p),S(k.$$.fragment,p),T=!0)},o(p){A(r.$$.fragment,p),A(R.$$.fragment,p),A(E.$$.fragment,p),A(k.$$.fragment,p),T=!1},d(p){p&&I(e),J(r),p&&I(s),p&&I(a),J(R),J(E),J(k),C=!1,Z(D)}}}const An="pixiv";function En(t,e,n){const r=te();let i="",s="",a=!1,o=!1;const l=async()=>{const y=new hn(new Te({basePath:he.apiBase}));n(3,o=!0);try{const N=await y.pixivAuthPost({login:{username:i,password:s}});wt(N,An),r("login"),n(2,a=!1),n(0,i=""),n(1,s="")}catch(N){console.log("Failed to login to pixiv",N)}finally{n(3,o=!1)}},u=()=>n(2,a=!a),c=()=>n(2,a=!1);function d(y){i=y,n(0,i)}function h(y){s=y,n(1,s)}return[i,s,a,o,l,u,c,d,h,()=>l()]}class Un extends X{constructor(e){super(),W(this,e,En,On,H,{})}}function Cn(t){let e,n;const r=t[2].default,i=Ce(r,t,t[1],null);return{c(){e=b("a"),i&&i.c(),f(e,"href",t[0]),f(e,"class","text-blue-900 hover:underline"),f(e,"target","_blank")},m(s,a){$(s,e,a),i&&i.m(e,null),n=!0},p(s,[a]){i&&i.p&&(!n||a&2)&&Ge(i,r,s,s[1],n?Fe(r,s[1],a,null):Ne(s[1]),null),(!n||a&1)&&f(e,"href",s[0])},i(s){n||(S(i,s),n=!0)},o(s){A(i,s),n=!1},d(s){s&&I(e),i&&i.d(s)}}}function Fn(t,e,n){let{$$slots:r={},$$scope:i}=e,{url:s}=e;return t.$$set=a=>{"url"in a&&n(0,s=a.url),"$$scope"in a&&n(1,i=a.$$scope)},[s,i,r]}class Gn extends X{constructor(e){super(),W(this,e,Fn,Cn,H,{url:0})}}const Nn="https://oauth.reddit.com";class Ln{constructor(e,n="web:social-media-manager:0.0.1 (by /u/illu11)"){j(this,"headers");j(this,"client");this.client=new mn(new Te({basePath:he.apiBase,headers:{Authorization:`Bearer ${e}`}})),this.headers={Authorization:`Bearer ${e}`,"User-Agent":n}}async getJson(e){const n=await fetch(Nn+e,{headers:this.headers});return n.status!==200?null:await n.json()}async refreshToken(e){const n=await fetch(he.apiBase+"/api/reddit/auth/refresh",{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});return n.status!==200?null:n.json()}async getUser(){return this.client.userUserGet()}async getUpvoted(e){return this.client.upvotedUpvotedUsernameGet({username:e}).then(n=>n.images)}}var Y=(t=>(t[t.LOADING=0]="LOADING",t[t.LOADED=1]="LOADED",t[t.FINISHED=2]="FINISHED",t[t.ERROR=3]="ERROR",t))(Y||{});function qn(t){let e,n,r,i,s,a,o;return{c(){e=b("div"),n=b("a"),r=b("img"),xe(r.src,i=t[0].image)||f(r,"src",i),f(r,"alt","close up of reference"),f(r,"class","max-h-[75vh] mx-auto"),f(n,"href",s=t[0].link),f(n,"target","_blank"),f(e,"class","fixed inset-0 flex items-center backdrop-blur justify-center"),$t(e,"background","rgba(0,0,0,0.75)")},m(l,u){$(l,e,u),_(e,n),_(n,r),a||(o=[M(n,"click",St(t[2])),M(e,"click",t[3])],a=!0)},p(l,[u]){u&1&&!xe(r.src,i=l[0].image)&&f(r,"src",i),u&1&&s!==(s=l[0].link)&&f(n,"href",s)},i:V,o:V,d(l){l&&I(e),a=!1,Z(o)}}}function Dn(t,e,n){let{image:r}=e;const i=te();function s(o){at.call(this,t,o)}const a=()=>i("close");return t.$$set=o=>{"image"in o&&n(0,r=o.image)},[r,i,s,a]}class Bn extends X{constructor(e){super(),W(this,e,Dn,qn,H,{image:0})}}function We(t,e,n){const r=t.slice();return r[16]=e[n],r}function Jn(t){let e,n;return{c(){e=b("span"),n=ee(t[3])},m(r,i){$(r,e,i),_(e,n)},p(r,i){i&8&&ve(n,r[3])},i:V,o:V,d(r){r&&I(e)}}}function xn(t){let e,n;return e=new Gn({props:{url:t[4],$$slots:{default:[zn]},$$scope:{ctx:t}}}),{c(){z(e.$$.fragment)},m(r,i){B(e,r,i),n=!0},p(r,i){const s={};i&16&&(s.url=r[4]),i&524296&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function zn(t){let e;return{c(){e=ee(t[3])},m(n,r){$(n,e,r)},p(n,r){r&8&&ve(e,n[3])},d(n){n&&I(e)}}}function Xe(t){let e,n,r;return{c(){e=b("button"),e.textContent="x",f(e,"class","font-bold")},m(i,s){$(i,e,s),n||(r=M(e,"click",t[11]),n=!0)},p:V,d(i){i&&I(e),n=!1,r()}}}function Qe(t){let e,n,r,i;function s(){return t[12](t[16])}return{c(){e=b("button"),f(e,"class","w-full bg-cover"),f(e,"style",n=`background-image: url(${t[16].image}); height: ${t[7]}px; width: ${t[8]}px`)},m(a,o){$(a,e,o),r||(i=M(e,"click",s),r=!0)},p(a,o){t=a,o&385&&n!==(n=`background-image: url(${t[16].image}); height: ${t[7]}px; width: ${t[8]}px`)&&f(e,"style",n)},d(a){a&&I(e),r=!1,i()}}}function Mn(t){let e;return{c(){e=b("div"),e.textContent="Error loading the data",f(e,"class","p-8 text-red-600")},m(n,r){$(n,e,r)},p:V,d(n){n&&I(e)}}}function Kn(t){let e;return{c(){e=b("div"),e.textContent="LOADING",f(e,"class","p-8")},m(n,r){$(n,e,r)},p:V,d(n){n&&I(e)}}}function Vn(t){let e,n,r;return{c(){e=b("button"),e.textContent="Load More...",f(e,"class","p-8")},m(i,s){$(i,e,s),n||(r=M(e,"click",t[14]),n=!0)},p:V,d(i){i&&I(e),n=!1,r()}}}function Ye(t){let e,n;return e=new Bn({props:{image:t[6]}}),e.$on("close",t[15]),{c(){z(e.$$.fragment)},m(r,i){B(e,r,i),n=!0},p(r,i){const s={};i&64&&(s.image=r[6]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Hn(t){let e,n,r,i,s,a,o,l,u,c,d,h,R,y,N,E,G;const x=[xn,Jn],v=[];function U(g,m){return g[4]?0:1}i=U(t),s=v[i]=x[i](t);let k=!t[2]&&Xe(t),P=t[0],T=[];for(let g=0;g<P.length;g+=1)T[g]=Qe(We(t,P,g));function C(g,m){if(g[1]==Y.LOADED)return Vn;if(g[1]==Y.LOADING)return Kn;if(g[1]==Y.ERROR)return Mn}let D=C(t),F=D&&D(t),w=t[6]&&Ye(t);return{c(){e=b("div"),n=b("div"),r=b("div"),s.c(),a=L(),o=b("button"),o.textContent="v",l=L(),k&&k.c(),u=L(),c=b("div");for(let g=0;g<T.length;g+=1)T[g].c();d=L(),h=b("div"),F&&F.c(),R=L(),w&&w.c(),y=ye(),f(o,"class","font-bold"),f(r,"class","flex gap-2"),f(n,"class","flex justify-between p-2"),f(c,"class","flex flex-wrap"),f(h,"class","flex flex-col items-center text-gray-500 text-sm text-center"),f(e,"class","flex flex-col gap-2 grow")},m(g,m){$(g,e,m),_(e,n),_(n,r),v[i].m(r,null),_(r,a),_(r,o),_(n,l),k&&k.m(n,null),_(e,u),_(e,c);for(let p=0;p<T.length;p+=1)T[p].m(c,null);t[13](c),_(e,d),_(e,h),F&&F.m(h,null),$(g,R,m),w&&w.m(g,m),$(g,y,m),N=!0,E||(G=M(o,"click",t[10]),E=!0)},p(g,[m]){let p=i;if(i=U(g),i===p?v[i].p(g,m):(fe(),A(v[p],1,1,()=>{v[p]=null}),de(),s=v[i],s?s.p(g,m):(s=v[i]=x[i](g),s.c()),S(s,1),s.m(r,a)),g[2]?k&&(k.d(1),k=null):k?k.p(g,m):(k=Xe(g),k.c(),k.m(n,null)),m&449){P=g[0];let O;for(O=0;O<P.length;O+=1){const q=We(g,P,O);T[O]?T[O].p(q,m):(T[O]=Qe(q),T[O].c(),T[O].m(c,null))}for(;O<T.length;O+=1)T[O].d(1);T.length=P.length}D===(D=C(g))&&F?F.p(g,m):(F&&F.d(1),F=D&&D(g),F&&(F.c(),F.m(h,null))),g[6]?w?(w.p(g,m),m&64&&S(w,1)):(w=Ye(g),w.c(),S(w,1),w.m(y.parentNode,y)):w&&(fe(),A(w,1,1,()=>{w=null}),de())},i(g){N||(S(s),S(w),N=!0)},o(g){A(s),A(w),N=!1},d(g){g&&I(e),v[i].d(),k&&k.d(),st(T,g),t[13](null),F&&F.d(),g&&I(R),w&&w.d(g),g&&I(y),E=!1,G()}}}function Wn(t,e,n){let r,i,{images:s=[]}=e,{status:a=Y.FINISHED}=e,{focused:o=!1}=e,{text:l=""}=e,{textLink:u=""}=e;const c=te();let d,h;const R=()=>c("toggleFocus"),y=()=>c("remove"),N=v=>n(6,d=v);function E(v){ce[v?"unshift":"push"](()=>{h=v,n(5,h)})}const G=()=>c("load"),x=()=>n(6,d=void 0);return t.$$set=v=>{"images"in v&&n(0,s=v.images),"status"in v&&n(1,a=v.status),"focused"in v&&n(2,o=v.focused),"text"in v&&n(3,l=v.text),"textLink"in v&&n(4,u=v.textLink)},t.$$.update=()=>{t.$$.dirty&32&&n(8,r=h==null?void 0:h.offsetWidth),t.$$.dirty&32&&n(7,i=(h==null?void 0:h.offsetWidth)*1.1)},[s,a,o,l,u,h,d,i,r,c,R,y,N,E,G,x]}class kt extends X{constructor(e){super(),W(this,e,Wn,Hn,H,{images:0,status:1,focused:2,text:3,textLink:4})}}function Ze(t){let e,n;return e=new kt({props:{images:t[0],text:"Reddit: "+t[1],textLink:`https://reddit.com/u/${t[1]}/upvoted`}}),{c(){z(e.$$.fragment)},m(r,i){B(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.images=r[0]),i&2&&(s.text="Reddit: "+r[1]),i&2&&(s.textLink=`https://reddit.com/u/${r[1]}/upvoted`),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Xn(t){let e,n,r=t[1]&&Ze(t);return{c(){e=b("div"),r&&r.c(),f(e,"class","basis-1/6 flex")},m(i,s){$(i,e,s),r&&r.m(e,null),n=!0},p(i,[s]){i[1]?r?(r.p(i,s),s&2&&S(r,1)):(r=Ze(i),r.c(),S(r,1),r.m(e,null)):r&&(fe(),A(r,1,1,()=>{r=null}),de())},i(i){n||(S(r),n=!0)},o(i){A(r),n=!1},d(i){i&&I(e),r&&r.d()}}}function Qn(t,e,n){let{token:r}=e,i=[],s;const a=te(),o=new Ln(r.token);ue(async()=>{await l(r),s&&n(0,i=await o.getUpvoted(s))});const l=async d=>{const h=await o.getUser();h==null?await u(d):n(1,s=h.name)},u=async d=>{if(d.refreshToken){console.log("Refreshing reddit token");const h=await o.refreshToken(d.refreshToken);h?(d=wn(d,h,"reddit"),d?a("refresh"):(console.log("Failed to read token"),c())):(console.log("Failed to get new token. Removing current token"),c())}},c=()=>{_n(r,"reddit"),a("refresh")};return t.$$set=d=>{"token"in d&&n(2,r=d.token)},[i,s,r]}class Yn extends X{constructor(e){super(),W(this,e,Qn,Xn,H,{token:2})}}function Zn(t){let e,n;return e=new kt({props:{images:t[3],text:t[0],textLink:`https://twitter.com/${t[0]}/media`,status:t[2],focused:t[1]}}),e.$on("remove",t[8]),e.$on("load",t[9]),e.$on("toggleFocus",t[10]),{c(){z(e.$$.fragment)},m(r,i){B(e,r,i),n=!0},p(r,[i]){const s={};i&8&&(s.images=r[3]),i&1&&(s.text=r[0]),i&1&&(s.textLink=`https://twitter.com/${r[0]}/media`),i&4&&(s.status=r[2]),i&2&&(s.focused=r[1]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}const jn=100,er=30;function tr(t,e,n){let{user:r}=e,{api:i}=e,{focused:s}=e;const a=te();let o=Y.LOADED,l,u,c=[];const d=`sns-manager-twitter-ref-cache-${r}`,h=()=>a("remove"),R=()=>a(s?"unfocus":"focus");ue(()=>{N(),y(r,null,u,!1)});const y=async(U,k=l,P=void 0,T=!0)=>{n(2,o=Y.LOADING);try{const C=await i.listTweetsTweetsUsernameGet({username:U,maxId:k!=null?k:void 0,sinceId:P!=null?P:void 0,count:jn});if(C.images.length===0){T?n(2,o=Y.FINISHED):n(2,o=Y.LOADED);return}const D=C.images[C.images.length-1];(!l||D.tweetId.length<l.length||D.tweetId.localeCompare(l)<0)&&(l=D.tweetId);const F=C.images[0].tweetId;(!u||F.length>u.length||F.localeCompare(u)>0)&&(u=F);const w=C.images.map(g=>({image:g.mediaUrl,link:g.link}));k==null?n(3,c=[...w,...c]):n(3,c=[...c,...w]),n(2,o=Y.LOADED),E()}catch(C){console.error(C),n(2,o=Y.ERROR)}},N=()=>{const U=JSON.parse(localStorage.getItem(d)||"{}");n(3,c=U.images||[]),u=U.firstId,l=U.lastId},E=()=>{localStorage.setItem(d,JSON.stringify({images:c.slice(0,er),lastId:l,firstId:u}))},G=()=>h(),x=()=>y(r),v=()=>R();return t.$$set=U=>{"user"in U&&n(0,r=U.user),"api"in U&&n(7,i=U.api),"focused"in U&&n(1,s=U.focused)},[r,s,o,c,h,R,y,i,G,x,v]}class nr extends X{constructor(e){super(),W(this,e,tr,Zn,H,{user:0,api:7,focused:1})}}function je(t,e,n){const r=t.slice();return r[7]=e[n],r}function et(t,e){let n,r,i,s,a,o;function l(){return e[4](e[7])}function u(){return e[5](e[7])}return r=new nr({props:{api:e[2],user:e[7],focused:e[1]===e[7]}}),r.$on("remove",l),r.$on("focus",u),r.$on("unfocus",e[6]),{key:t,first:null,c(){n=b("div"),z(r.$$.fragment),i=L(),f(n,"style",s=e[1]==e[7]?"flex-basis: 100%":""),f(n,"class",a=`basis-1/6 ${!e[1]||e[1]==e[7]?"flex":"hidden"}`),this.first=n},m(c,d){$(c,n,d),B(r,n,null),_(n,i),o=!0},p(c,d){e=c;const h={};d&1&&(h.user=e[7]),d&3&&(h.focused=e[1]===e[7]),r.$set(h),(!o||d&3&&s!==(s=e[1]==e[7]?"flex-basis: 100%":""))&&f(n,"style",s),(!o||d&3&&a!==(a=`basis-1/6 ${!e[1]||e[1]==e[7]?"flex":"hidden"}`))&&f(n,"class",a)},i(c){o||(S(r.$$.fragment,c),o=!0)},o(c){A(r.$$.fragment,c),o=!1},d(c){c&&I(n),J(r)}}}function rr(t){let e=[],n=new Map,r,i,s=t[0];const a=o=>o[7];for(let o=0;o<s.length;o+=1){let l=je(t,s,o),u=a(l);n.set(u,e[o]=et(u,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=ye()},m(o,l){for(let u=0;u<e.length;u+=1)e[u].m(o,l);$(o,r,l),i=!0},p(o,[l]){l&15&&(s=o[0],fe(),e=Ft(e,l,a,1,o,s,n,r.parentNode,Ct,et,r,je),de())},i(o){if(!i){for(let l=0;l<s.length;l+=1)S(e[l]);i=!0}},o(o){for(let l=0;l<e.length;l+=1)A(e[l]);i=!1},d(o){for(let l=0;l<e.length;l+=1)e[l].d(o);o&&I(r)}}}function ir(t,e,n){let{users:r}=e,i;const s=new pn(new Te({basePath:he.apiBase})),a=te(),o=c=>a("remove",{user:c}),l=c=>n(1,i=c),u=()=>n(1,i=void 0);return t.$$set=c=>{"users"in c&&n(0,r=c.users)},[r,i,s,a,o,l,u]}class sr extends X{constructor(e){super(),W(this,e,ir,rr,H,{users:0})}}function or(t){let e,n,r,i,s;return{c(){e=b("h1"),e.textContent="Twitter",n=L(),r=b("input"),f(e,"class","font-bold text-xl"),f(r,"class","border"),f(r,"placeholder","add user")},m(a,o){$(a,e,o),$(a,n,o),$(a,r,o),se(r,t[0]),i||(s=[M(r,"input",t[2]),M(r,"keydown",t[1])],i=!0)},p(a,[o]){o&1&&r.value!==a[0]&&se(r,a[0])},i:V,o:V,d(a){a&&I(e),a&&I(n),a&&I(r),i=!1,Z(s)}}}function ar(t,e,n){let r="";const i=te(),s=o=>{o.key=="Enter"&&(i("add",{user:r}),n(0,r=""))};function a(){r=this.value,n(0,r)}return[r,s,a]}class lr extends X{constructor(e){super(),W(this,e,ar,or,H,{})}}function tt(t,e,n){const r=t.slice();return r[17]=e[n],r}function nt(t){let e,n;return e=new Yn({props:{token:t[17]}}),{c(){z(e.$$.fragment)},m(r,i){B(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.token=r[17]),e.$set(s)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function ur(t){let e,n,r,i,s,a,o,l,u,c,d,h,R,y,N,E,G,x,v,U,k,P,T,C,D;s=new Se({props:{provider:"twitter"}}),s.$on("login",t[7]),o=new Se({props:{provider:"reddit"}}),o.$on("login",t[8]),u=new Se({props:{provider:"pinterest"}}),u.$on("login",t[9]),d=new Un({}),d.$on("login",t[10]),E=new lr({}),E.$on("add",t[12]),k=new sr({props:{users:t[2]}}),k.$on("remove",t[13]);let F=t[0],w=[];for(let m=0;m<F.length;m+=1)w[m]=nt(tt(t,F,m));const g=m=>A(w[m],1,1,()=>{w[m]=null});return{c(){e=b("div"),n=b("header"),r=b("button"),r.textContent="Open Sidebar",i=L(),z(s.$$.fragment),a=L(),z(o.$$.fragment),l=L(),z(u.$$.fragment),c=L(),z(d.$$.fragment),h=L(),R=b("div"),y=b("button"),y.textContent="x",N=L(),z(E.$$.fragment),x=L(),v=b("main"),U=b("div"),z(k.$$.fragment),P=L();for(let m=0;m<w.length;m+=1)w[m].c();f(n,"class","flex flex-row justify-center gap-4 border-b p-2"),f(R,"class",G="absolute inset-y-0 left-0 bg-red-300 w-80 "+(t[1]?"block":"hidden")),f(U,"class","flex grow"),f(v,"class","p-4 flex"),f(e,"class","h-full flex flex-col")},m(m,p){$(m,e,p),_(e,n),_(n,r),_(n,i),B(s,n,null),_(n,a),B(o,n,null),_(n,l),B(u,n,null),_(n,c),B(d,n,null),_(e,h),_(e,R),_(R,y),_(R,N),B(E,R,null),_(e,x),_(e,v),_(v,U),B(k,U,null),_(U,P);for(let O=0;O<w.length;O+=1)w[O].m(U,null);T=!0,C||(D=[M(r,"click",t[6]),M(y,"click",t[11])],C=!0)},p(m,[p]){(!T||p&2&&G!==(G="absolute inset-y-0 left-0 bg-red-300 w-80 "+(m[1]?"block":"hidden")))&&f(R,"class",G);const O={};if(p&4&&(O.users=m[2]),k.$set(O),p&1){F=m[0];let q;for(q=0;q<F.length;q+=1){const ie=tt(m,F,q);w[q]?(w[q].p(ie,p),S(w[q],1)):(w[q]=nt(ie),w[q].c(),S(w[q],1),w[q].m(U,null))}for(fe(),q=F.length;q<w.length;q+=1)g(q);de()}},i(m){if(!T){S(s.$$.fragment,m),S(o.$$.fragment,m),S(u.$$.fragment,m),S(d.$$.fragment,m),S(E.$$.fragment,m),S(k.$$.fragment,m);for(let p=0;p<F.length;p+=1)S(w[p]);T=!0}},o(m){A(s.$$.fragment,m),A(o.$$.fragment,m),A(u.$$.fragment,m),A(d.$$.fragment,m),A(E.$$.fragment,m),A(k.$$.fragment,m),w=w.filter(Boolean);for(let p=0;p<w.length;p+=1)A(w[p]);T=!1},d(m){m&&I(e),J(s),J(o),J(u),J(d),J(E),J(k),st(w,m),C=!1,Z(D)}}}const Ie="sns-manager-twitter-reference-users";function cr(t,e,n){let r=[],i=!1,s=[];ue(async()=>{n(2,s=JSON.parse(localStorage.getItem(Ie)||"[]"))});const a=G=>{n(2,s=s.filter(x=>x!==G)),localStorage.setItem(Ie,JSON.stringify(s))},o=G=>{n(2,s=[...s,G]),localStorage.setItem(Ie,JSON.stringify(s))},l=()=>{re("twitter"),n(0,r=re("reddit")),re("pixiv"),re("pinterest")};return ue(()=>l()),[r,i,s,a,o,l,()=>n(1,i=!i),()=>l(),()=>l(),()=>l(),()=>l(),()=>n(1,i=!1),G=>o(G.detail.user),G=>a(G.detail.user)]}class fr extends X{constructor(e){super(),W(this,e,cr,ur,H,{})}}new fr({target:document.getElementById("app")});
